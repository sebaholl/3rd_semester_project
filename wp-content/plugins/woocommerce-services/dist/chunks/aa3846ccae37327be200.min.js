(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{156:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=259200},412:function(e,t,a){e.exports=a.p+"images/ef104cbfbb5c270f6a19262e20ef5c0a.jpg"},413:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return _});var n=a(62),r=a.n(n),i=a(8),s=a(35),o=3,c=5,l=7,u=9,d=11,m=12,p={2:"stateInit",3:"stateErrorInit",4:"stateInstalling",5:"stateErrorInstalling",6:"stateActivating",7:"stateErrorActivating",8:"stateDB",9:"stateErrorDB",10:"stateDeactivating",11:"stateErrorDeactivating",12:"stateDone"},g=function(){return{"Content-Type":"application/json","X-WP-Nonce":Object(s.c)()}},h=function(t){return function(){return e(Object(s.b)()+"wc/v1/connect/migration-flag",{method:"POST",headers:g(),body:JSON.stringify({migration_state:t})})}},b=function(e){return function(){return h(e)()}},f=function(e){return r()(regeneratorRuntime.mark(function t(){var a,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:if(!((a=t.sent).status>=400)){t.next=8;break}return t.next=6,a.json();case 6:throw n=t.sent,new Error(n.message||Object(i.translate)("Failed to setup WooCommerce Shipping. Please try again."));case 8:return t.abrupt("return",a);case 9:case"end":return t.stop()}},t)}))},v={stateInit:{success:"stateInstalling",fail:"stateInit",callback:f(h(2))},stateErrorInit:{success:"stateInit",fail:"stateErrorInit",callback:b(o)},stateInstalling:{success:"stateActivating",fail:"stateErrorInstalling",callback:f(function(){return e(Object(s.b)()+"wc-admin/plugins/install",{method:"POST",headers:g(),body:JSON.stringify({plugins:"woocommerce-shipping"})})})},stateErrorInstalling:{success:"stateInstalling",fail:"stateErrorInstalling",callback:b(c)},stateActivating:{success:"stateDone",fail:"stateErrorActivating",callback:f(function(){return e(Object(s.b)()+"wc-admin/plugins/activate",{method:"POST",headers:g(),body:JSON.stringify({plugins:"woocommerce-shipping"})})})},stateErrorActivating:{success:"stateActivating",fail:"stateErrorActivating",callback:b(l)},stateDB:{success:"stateDeactivating",fail:"stateErrorDB",callback:new Promise(function(e){return e({status:200})})},stateErrorDB:{success:"stateDBMigrating",fail:"stateErrorDB",callback:b(u)},stateDeactivating:{success:"stateDone",fail:"stateErrorDeactivating",callback:f(function(){return e(Object(s.b)()+"wp/v2/plugins/woocommerce-services/woocommerce-services",{method:"POST",headers:g(),body:JSON.stringify({status:"inactive"})})})},stateErrorDeactivating:{success:"stateDeactivating",fail:"stateErrorDeactivating",callback:b(d)},stateDone:{success:null,fail:null,callback:b(m)}},E=function(e){if(!v[e])throw new Error("Migration state ["+e+"] not found");return v[e]},y=["stateDone","stateErrorInstalling","stateErrorActivating","stateErrorDB","stateErrorDeactivating"],_=function(){var e=r()(regeneratorRuntime.mark(function e(t){var a,n,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){var e=r()(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=E(t),n="",e.prev=4,e.next=7,a.callback();case 7:n=a.success,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),n=a.fail;case 13:return e.prev=13,e.abrupt("return",n);case 16:case"end":return e.stop()}},e,null,[[4,10,13,16]])}));return function(t){return e.apply(this,arguments)}}(),n=function(){return t?E(p[t]).success:p[2]}(),i=0,s=Object.keys(v).length;case 5:if(!(i++<s)){e.next=15;break}return e.next=8,a(n);case 8:if(n=e.sent,!y.includes(n)){e.next=13;break}return e.next=12,a(n);case 12:return e.abrupt("break",15);case 13:e.next=5;break;case 15:window.location=window.wcsPluginData.adminPluginPath;case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}).call(this,a(155))},422:function(e,t,a){"use strict";var n=a(62),r=a.n(n),i=a(53),s=a.n(i),o=a(2),c=a.n(o),l=a(672),u=a(670),d=a(414),m=a(431),p=a(160),g=a(61),h=a(36),b=a(8),f=a(412),v=a.n(f),E=function(){return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},c.a.createElement("path",{d:"M15.8751 8.31934C16.2338 8.52644 16.3567 8.98514 16.1496 9.34385L12.6496 15.406C12.4425 15.7648 11.9838 15.8877 11.6251 15.6806C11.2664 15.4734 11.1435 15.0148 11.3506 14.656L14.8506 8.59385C15.0577 8.23514 15.5164 8.11223 15.8751 8.31934Z",fill:"#1E1E1E"}),c.a.createElement("path",{d:"M7.31285 10.8816C6.95413 10.6745 6.49544 10.7974 6.28833 11.1561C6.08122 11.5149 6.20413 11.9736 6.56285 12.1807L6.99586 12.4307C7.35458 12.6378 7.81327 12.5149 8.02038 12.1561C8.22749 11.7974 8.10458 11.3387 7.74586 11.1316L7.31285 10.8816Z",fill:"#1E1E1E"}),c.a.createElement("path",{d:"M8.53135 8.31946C8.89007 8.11235 9.34877 8.23526 9.55587 8.59398L9.80587 9.02699C10.013 9.38571 9.89007 9.8444 9.53135 10.0515C9.17264 10.2586 8.71394 10.1357 8.50684 9.77699L8.25684 9.34398C8.04973 8.98526 8.17264 8.52656 8.53135 8.31946Z",fill:"#1E1E1E"}),c.a.createElement("path",{d:"M12.75 7.75C12.75 7.33579 12.4142 7 12 7C11.5858 7 11.25 7.33579 11.25 7.75V8.25C11.25 8.66421 11.5858 9 12 9C12.4142 9 12.75 8.66421 12.75 8.25V7.75Z",fill:"#1E1E1E"}),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 13C3.25 8.16751 7.16751 4.25 12 4.25C16.8325 4.25 20.75 8.16751 20.75 13C20.75 14.824 20.1911 16.5197 19.2351 17.9224L19.0118 18.25H4.98822L4.76493 17.9224C3.80893 16.5197 3.25 14.824 3.25 13ZM12 5.75C7.99594 5.75 4.75 8.99594 4.75 13C4.75 14.3736 5.1313 15.6562 5.79378 16.75H18.2062C18.8687 15.6562 19.25 14.3736 19.25 13C19.25 8.99594 16.0041 5.75 12 5.75Z",fill:"#1E1E1E"}))},y=function(){return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},c.a.createElement("rect",{width:"24",height:"24",rx:"2",fill:"white"}),c.a.createElement("path",{d:"M18 4H6C4.9 4 4 4.9 4 6V18C4 19.1 4.9 20 6 20H18C19.1 20 20 19.1 20 18V6C20 4.9 19.1 4 18 4ZM18.5 18C18.5 18.3 18.3 18.5 18 18.5H6C5.7 18.5 5.5 18.3 5.5 18V6C5.5 5.7 5.7 5.5 6 5.5H18C18.3 5.5 18.5 5.7 18.5 6V18ZM7 16.5H13V15H7V16.5ZM11 12.5H17V11H11V12.5ZM9 11H7V12.5H9V11ZM15 16.5H17V15H15V16.5Z",fill:"black"}))},_=function(){return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},c.a.createElement("rect",{width:"24",height:"24",rx:"2",fill:"white"}),c.a.createElement("path",{d:"M3 6.75C3 5.784 3.784 5 4.75 5H15V7.313L15.05 7.34L20.106 10.07L20.5 10.282V13.75C20.5 14.2141 20.3156 14.6592 19.9874 14.9874C19.6592 15.3156 19.2141 15.5 18.75 15.5H18.738C18.7729 15.8476 18.7345 16.1987 18.6254 16.5306C18.5163 16.8624 18.3388 17.1678 18.1044 17.4269C17.8701 17.6859 17.584 17.893 17.2647 18.0347C16.9453 18.1765 16.5999 18.2497 16.2505 18.2497C15.9011 18.2497 15.5557 18.1765 15.2363 18.0347C14.917 17.893 14.6309 17.6859 14.3966 17.4269C14.1622 17.1678 13.9847 16.8624 13.8756 16.5306C13.7665 16.1987 13.7281 15.8476 13.763 15.5H9.737C9.77189 15.8476 9.73354 16.1987 9.62442 16.5306C9.51529 16.8624 9.33782 17.1678 9.10344 17.4269C8.86907 17.6859 8.58299 17.893 8.26367 18.0347C7.94435 18.1765 7.59886 18.2497 7.2495 18.2497C6.90014 18.2497 6.55465 18.1765 6.23533 18.0347C5.91601 17.893 5.62993 17.6859 5.39556 17.4269C5.16118 17.1678 4.98371 16.8624 4.87458 16.5306C4.76546 16.1987 4.72711 15.8476 4.762 15.5H3V6.75ZM13.5 14V6.5H4.75C4.6837 6.5 4.62011 6.52634 4.57322 6.57322C4.52634 6.62011 4.5 6.6837 4.5 6.75V14H5.465C5.69748 13.7623 5.97516 13.5734 6.28172 13.4446C6.58827 13.3158 6.91749 13.2497 7.25 13.25C7.95 13.25 8.582 13.537 9.035 14H13.5ZM18.035 14H18.75C18.8163 14 18.8799 13.9737 18.9268 13.9268C18.9737 13.8799 19 13.8163 19 13.75V11.177L15 9.017V13.585C15.3798 13.365 15.8111 13.2494 16.25 13.25C16.95 13.25 17.582 13.537 18.035 14ZM6.282 15.5C6.24426 15.6477 6.24074 15.8021 6.27168 15.9514C6.30263 16.1007 6.36725 16.241 6.4606 16.3615C6.55395 16.4821 6.67358 16.5797 6.81038 16.647C6.94718 16.7144 7.09753 16.7496 7.25 16.75C7.43704 16.75 7.62035 16.6976 7.7791 16.5987C7.93785 16.4998 8.06567 16.3583 8.14804 16.1904C8.23042 16.0225 8.26405 15.8348 8.2451 15.6487C8.22616 15.4627 8.15541 15.2856 8.04089 15.1377C7.92637 14.9898 7.77266 14.877 7.59724 14.8121C7.42182 14.7472 7.23171 14.7328 7.04851 14.7706C6.86531 14.8083 6.69637 14.8967 6.56087 15.0256C6.42538 15.1545 6.32876 15.3189 6.282 15.5ZM15.282 15.5C15.2489 15.6273 15.2413 15.7599 15.2595 15.8902C15.2778 16.0204 15.3215 16.1458 15.3883 16.2592C15.4551 16.3725 15.5435 16.4715 15.6487 16.5506C15.7538 16.6297 15.8735 16.6873 16.0009 16.72C16.1283 16.7528 16.2609 16.7601 16.3911 16.7415C16.5213 16.7229 16.6466 16.6788 16.7597 16.6118C16.8729 16.5447 16.9717 16.456 17.0505 16.3506C17.1293 16.2453 17.1866 16.1255 17.219 15.998C17.285 15.741 17.2463 15.4683 17.1113 15.2399C16.9762 15.0115 16.756 14.846 16.499 14.78C16.242 14.714 15.9693 14.7527 15.7409 14.8877C15.5125 15.0228 15.347 15.243 15.281 15.5H15.282Z",fill:"black"}))},k=function(){return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},c.a.createElement("path",{d:"M8.85074 4.82081L7.64702 3.92578L5.56365 6.72769L4.44959 5.89687L3.55286 7.09931L5.87107 8.82813L8.85074 4.82081Z",fill:"#1E1E1E"}),c.a.createElement("path",{d:"M20 7.74955H11.1111V6.24955H20V7.74955Z",fill:"#1E1E1E"}),c.a.createElement("path",{d:"M20 12.7496H11.1111V11.2496H20V12.7496Z",fill:"#1E1E1E"}),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 13.9996C7.10457 13.9996 8 13.1041 8 11.9996C8 10.895 7.10457 9.99955 6 9.99955C4.89543 9.99955 4 10.895 4 11.9996C4 13.1041 4.89543 13.9996 6 13.9996ZM6 12.9996C6.55229 12.9996 7 12.5518 7 11.9996C7 11.4473 6.55229 10.9996 6 10.9996C5.44772 10.9996 5 11.4473 5 11.9996C5 12.5518 5.44772 12.9996 6 12.9996Z",fill:"#1E1E1E"}),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16.9996C8 18.1041 7.10457 18.9996 6 18.9996C4.89543 18.9996 4 18.1041 4 16.9996C4 15.895 4.89543 14.9996 6 14.9996C7.10457 14.9996 8 15.895 8 16.9996ZM7 16.9996C7 17.5518 6.55229 17.9996 6 17.9996C5.44772 17.9996 5 17.5518 5 16.9996C5 16.4473 5.44772 15.9996 6 15.9996C6.55229 15.9996 7 16.4473 7 16.9996Z",fill:"#1E1E1E"}),c.a.createElement("path",{d:"M11.1111 17.7496H20V16.2496H11.1111V17.7496Z",fill:"#1E1E1E"}))},O=a(11),C=a(413),N=a(156);t.a=Object(g.b)(function(e,t){var a=t.siteId;return{isEligable:Object(O.u)(e,a),previousMigrationState:Object(O.A)(e,a)}},function(e){return Object(h.b)({},e)})(Object(b.localize)(function(e){var t=e.translate,a=e.isEligable,n=e.previousMigrationState,i=e.onClose,g=Object(o.useState)(a),h=s()(g,2),b=h[0],f=h[1],O=Object(o.useState)(!1),I=s()(O,2),w=I[0],j=I[1];Object(o.useEffect)(function(){window.wpCookies.get("wcst-wcshipping-migration-dismissed")&&parseInt(window.wpCookies.get("wcst-wcshipping-migration-dismissed"))&&f(!1)},[]);var x=function(){var e=r()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,Object(C.a)(n);case 3:j(!1);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,b&&c.a.createElement(l.a,{className:"migration__announcement-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){f(!1),i&&i()}},c.a.createElement(u.a,{gap:8},c.a.createElement(d.a,null,c.a.createElement(u.a,null,c.a.createElement("span",null,t("Try WooCommerce Shipping")),c.a.createElement("h2",null,t("A new WooCommerce Shipping experience is now available")),c.a.createElement("p",null,t("We'll ensure a seamless transition by allowing you to migrate all your compatible settings and shipping labels when you update.")),c.a.createElement("p",null,t("Here's what you can expect from the new shipping experience:")),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(m.a,{icon:E}),c.a.createElement("div",null,c.a.createElement("h3",null,t("A seamless transition")),c.a.createElement("p",null,t("Automatically migrate all your compatible settings and shipment history to the new extension.")))),c.a.createElement("li",null,c.a.createElement(m.a,{icon:y}),c.a.createElement("div",null,c.a.createElement("h3",null,t("Print and save")),c.a.createElement("p",null,t("Speed up label creation with a streamlined process to print and save your label preferences.")))),c.a.createElement("li",null,c.a.createElement(m.a,{icon:_}),c.a.createElement("div",null,c.a.createElement("h3",null,t("USPS and DHL Express")),c.a.createElement("p",null,t("Ship your productss using trusted shipping carriers like USPS and DHL Express at discounted rates, with more options and carriers coming soon.")))),c.a.createElement("li",null,c.a.createElement(m.a,{icon:k}),c.a.createElement("div",null,c.a.createElement("h3",null,t("Enhanced label purchase flow")),c.a.createElement("p",null,t("Experience a smoother label purchasing process with our updated interface.")))))),c.a.createElement(u.a,null,!w&&c.a.createElement(p.a,{isTertiary:!0,onClick:function(){window.wpCookies.set("wcst-wcshipping-migration-dismissed",1,N.a),f(!1),i&&i()}},t("Maybe later")),c.a.createElement(p.a,{id:"migration__announcement-update-button",isPrimary:!0,onClick:x,isBusy:w,disabled:w},t(w?"Installing WooCommerce Shipping\u2026":"Try WooCommerce Shipping now")))),c.a.createElement(d.a,{style:{background:"url(".concat(v.a,") no-repeat center center"),backgroundSize:"contain"}},"\xa0"))))}))},674:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(69),s=a.n(i),o=a(2),c=a.n(o),l=a(32),u=a.n(l);t.a=function(e){var t=e.className,a=e.children,n=s()(e,["className","children"]);return c.a.createElement("fieldset",r()({},n,{className:u()(t,"form-fieldset")}),a)}},675:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(69),s=a.n(i),o=a(2),c=a.n(o),l=a(19),u=a.n(l),d=a(32),m=a.n(d),p=a(8),g=function(e){var t=e.children,a=e.required,n=e.optional,i=e.translate,o=e.className,l=(e.moment,e.numberFormat,e.dangerouslySetInnerHTML),u=s()(e,["children","required","optional","translate","className","moment","numberFormat","dangerouslySetInnerHTML"]),d=l?null:c.a.createElement(c.a.Fragment,null,t,a&&c.a.createElement("small",{className:"form-label__required"},i("Required")),n&&c.a.createElement("small",{className:"form-label__optional"},i("Optional")));return c.a.createElement("label",r()({},u,{dangerouslySetInnerHTML:l,className:m()(o,"form-label")}),d)};g.propTypes={required:u.a.bool,optional:u.a.bool,children:u.a.node},t.a=Object(p.localize)(g)},676:function(e,t,a){"use strict";var n=a(2),r=a.n(n),i=a(19),s=a.n(i),o=a(32),c=a.n(o),l=a(261),u=a.n(l),d=function(e){var t=e.text,a=e.type,n=void 0===a?"input-validation":a;return r.a.createElement("div",{className:c()("field-error","field-error__".concat(n))},r.a.createElement(u.a,{size:24,icon:"notice-outline"})," ",r.a.createElement("span",null,t))};d.propTypes={text:s.a.string.isRequired,type:s.a.string},t.a=d},677:function(e,t,a){"use strict";a.d(t,"a",function(){return C});var n=a(260),r=a.n(n),i=a(52),s=a.n(i),o=a(78),c=a.n(o),l=a(91),u=a.n(l),d=a(85),m=a.n(d),p=a(92),g=a.n(p),h=a(5),b=a.n(h),f=a(2),v=a.n(f),E=a(19),y=a.n(E),_=a(32),k=a.n(_),O=a(0),C=function(e){function t(){return s()(this,t),u()(this,m()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"render",value:function(){var e=k()(this.props.className,"form-setting-explanation",{"no-validate":this.props.noValidate,"is-indented":this.props.isIndented});return v.a.createElement("p",r()({},Object(O.omit)(this.props,"className","noValidate","isIndented"),{className:e}),this.props.children)}}]),t}(v.a.Component);b()(C,"displayName","FormSettingExplanation"),b()(C,"propTypes",{noValidate:y.a.bool,isIndented:y.a.bool,className:y.a.string}),b()(C,"defaultProps",{noValidate:!1,isIndented:!1})},678:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(69),s=a.n(i),o=a(2),c=a.n(o),l=a(32),u=a.n(l);t.a=function(e){var t=e.className,a=e.children,n=s()(e,["className","children"]);return c.a.createElement("legend",r()({},n,{className:u()(t,"form-legend")}),a)}},679:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(69),s=a.n(i),o=a(2),c=a.n(o),l=a(32),u=a.n(l);t.a=function(e){var t=e.className,a=e.children,n=s()(e,["className","children"]);return c.a.createElement("h3",r()({},n,{className:u()(t,"form-section-heading")}),a)}},680:function(e,t,a){"use strict";var n=a(52),r=a.n(n),i=a(78),s=a.n(i),o=a(91),c=a.n(o),l=a(85),u=a.n(l),d=a(93),m=a.n(d),p=a(92),g=a.n(p),h=a(5),b=a.n(h),f=a(19),v=a.n(f),E=a(2),y=a.n(E),_=a(32),k=a.n(_),O=a(0),C=a(8),N=a(261),I=a.n(N);a(684);function w(e){var t=e.children;return y.a.createElement("span",{className:"screen-reader-text"},t)}var j=function(e){function t(){var e,a;r()(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return a=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(m()(a),"dismissTimeout",null),a}return g()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.props.duration>0&&(this.dismissTimeout=setTimeout(this.props.onDismissClick,this.props.duration))}},{key:"componentWillUnmount",value:function(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}},{key:"componentDidUpdate",value:function(){clearTimeout(this.dismissTimeout),this.props.duration>0&&(this.dismissTimeout=setTimeout(this.props.onDismissClick,this.props.duration))}},{key:"getIcon",value:function(){var e;switch(this.props.status){case"is-info":e="info";break;case"is-success":e="checkmark";break;case"is-error":case"is-warning":e="notice";break;default:e="info"}return e}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.className,n=e.icon,r=e.isCompact,i=e.isLoading,s=e.onDismissClick,o=e.showDismiss,c=void 0===o?!r:o,l=e.status,u=e.text,d=e.translate,m=k()("notice",l,a,{"is-compact":r,"is-loading":i,"is-dismissable":c});return y.a.createElement("div",{className:m},y.a.createElement("span",{className:"notice__icon-wrapper"},y.a.createElement(I.a,{className:"notice__icon",icon:n||this.getIcon(),size:24})),y.a.createElement("span",{className:"notice__content"},y.a.createElement("span",{className:"notice__text"},u||t)),u?t:null,c&&y.a.createElement("span",{tabIndex:"0",className:"notice__dismiss",onClick:s,onKeyDown:s,role:"button","aria-label":d("Dismiss")},y.a.createElement(I.a,{icon:"cross",size:24}),y.a.createElement(w,null,d("Dismiss"))))}}]),t}(E.Component);b()(j,"defaultProps",{className:"",duration:0,icon:null,isCompact:!1,isLoading:!1,onDismissClick:O.noop,status:null,text:null}),b()(j,"propTypes",{className:v.a.string,duration:v.a.number,icon:v.a.string,isCompact:v.a.bool,isLoading:v.a.bool,onDismissClick:v.a.func,showDismiss:v.a.bool,status:v.a.oneOf(["is-error","is-info","is-success","is-warning","is-plain"]),text:v.a.oneOfType([v.a.arrayOf(v.a.oneOfType([v.a.string,v.a.node])),v.a.oneOfType([v.a.string,v.a.node])]),translate:v.a.func.isRequired});t.a=Object(C.localize)(j)},681:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(69),s=a.n(i),o=a(2),c=a.n(o),l=a(32),u=a.n(l);a(688);t.a=function(e){var t=e.inputRef,a=e.className,n=e.isError,i=s()(e,["inputRef","className","isError"]);return c.a.createElement("select",r()({},i,{ref:t,className:u()(a,"form-select",{"is-error":n})}))}},683:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(52),s=a.n(i),o=a(78),c=a.n(o),l=a(91),u=a.n(l),d=a(85),m=a.n(d),p=a(93),g=a.n(p),h=a(92),b=a.n(h),f=a(5),v=a.n(f),E=a(19),y=a.n(E),_=a(2),k=a.n(_),O=a(0),C=a(691),N=a(409),I=a.n(N),w=a(32),j=a.n(w),x=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=u()(this,(e=m()(t)).call.apply(e,[this].concat(r))),v()(g()(a),"_onButtonClick",function(e){e.onClick?e.onClick(a._close.bind(g()(a),e.action)):a._close(e.action)}),v()(g()(a),"_close",function(e){a.props.onDialogClose&&a.props.onDialogClose(e)}),a}return b()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.additionalClassNames,a=e.isBackdropVisible,n=e.baseClassName,r=e.isFullScreen,i=e.shouldCloseOnEsc,s=n+"__content",o=j()(n,"card",t),c=j()(n+"__backdrop",{"is-full-screen":!!r,"is-hidden":!a});return k.a.createElement(I.a,{isOpen:this.props.isVisible,onRequestClose:this._close,closeTimeoutMS:this.props.leaveTimeout,contentLabel:this.props.label,appElement:document.getElementById("wpcom"),overlayClassName:c,className:o,htmlOpenClassName:"ReactModal__Html--open",role:"dialog",shouldCloseOnEsc:i},k.a.createElement("div",{className:j()(this.props.className,s),tabIndex:"-1"},this.props.children),this._renderButtonsBar())}},{key:"_renderButtonsBar",value:function(){var e=this.props.baseClassName+"__action-buttons";return this.props.buttons?k.a.createElement("div",{className:e},this.props.buttons.map(this._renderButton,this)):null}},{key:"_renderButton",value:function(e,t){if(k.a.isValidElement(e))return k.a.cloneElement(e,{key:"dialog-button-"+t});var a=this._getButtonClasses(e),n=this._onButtonClick.bind(this,e);return k.a.createElement("button",{key:e.action,className:a,"data-e2e-button":e.action,"data-tip-target":"dialog-base-action-".concat(e.action),onClick:n,disabled:!!e.disabled},k.a.createElement("span",{className:this.props.baseClassName+"__button-label"},e.label))}},{key:"_getButtonClasses",value:function(e){var t=e.className||"button";return(e.isPrimary||1===this.props.buttons.length)&&(t+=" is-primary"),e.additionalClassNames&&(t+=" "+e.additionalClassNames),t}}]),t}(_.Component);v()(x,"propTypes",{additionalClassNames:y.a.oneOfType([y.a.object,y.a.string]),autoFocus:y.a.bool,baseClassName:y.a.string,buttons:y.a.array,className:y.a.string,isBackdropVisible:y.a.bool,isFullScreen:y.a.bool,isVisible:y.a.bool,label:y.a.string,leaveTimeout:y.a.number,onDialogClose:y.a.func,shouldCloseOnEsc:y.a.bool}),v()(x,"defaultProps",{baseClassName:"dialog",isBackdropVisible:!0,isFullScreen:!0,autoFocus:!0,label:""});var S=x,R=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=u()(this,(e=m()(t)).call.apply(e,[this].concat(r))),v()(g()(a),"checkOnClosed",function(e){null===e&&Object(O.defer)(a.props.onClosed)}),v()(g()(a),"onDialogClose",function(e){a.props.onClose&&a.props.onClose(e)}),a}return b()(t,e),c()(t,[{key:"render",value:function(){return k.a.createElement(C.a,null,k.a.createElement(S,r()({},this.props,{ref:this.checkOnClosed,key:"dialog",onDialogClose:this.onDialogClose})))}}]),t}(_.Component);v()(R,"propTypes",{isVisible:y.a.bool,baseClassName:y.a.string,leaveTimeout:y.a.number,onClose:y.a.func,onClosed:y.a.func,shouldCloseOnEsc:y.a.bool}),v()(R,"defaultProps",{isVisible:!1,leaveTimeout:200,onClosed:O.noop});t.a=R},684:function(e,t,a){},685:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(69),s=a.n(i),o=a(52),c=a.n(o),l=a(78),u=a.n(l),d=a(91),m=a.n(d),p=a(85),g=a.n(p),h=a(93),b=a.n(h),f=a(92),v=a.n(f),E=a(5),y=a.n(E),_=a(32),k=a.n(_),O=a(8),C=a(0),N=a(2),I=a.n(N),w=a(19),j=a.n(w),x=a(160),S=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=m()(this,(e=g()(t)).call.apply(e,[this].concat(r))),y()(b()(a),"getDefaultButtonAction",function(){return a.props.isSubmitting?a.props.translate("Saving\u2026"):a.props.translate("Save Settings")}),a}return v()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.className,n=e.isPrimary,i=s()(e,["children","className","isPrimary"]),o=k()(a,"form-button","button",{"is-borderless":this.props.borderless});return I.a.createElement(x.a,r()({},Object(C.omit)(i,["isSubmitting","moment","numberFormat","translate","borderless"]),{isPrimary:n,className:o}),N.Children.count(t)?t:this.getDefaultButtonAction())}}]),t}(I.a.Component);y()(S,"defaultProps",{isSubmitting:!1,isPrimary:!0,type:"submit",borderless:!1}),S.propTypes={isSubmitting:j.a.bool,isPrimary:j.a.bool,type:j.a.string,borderless:j.a.bool},t.a=Object(O.localize)(S)},686:function(e,t,a){"use strict";var n=a(2),r=a.n(n),i=a(19),s=a.n(i),o=a(32),c=a.n(o),l=a(761),u=a(674),d=a(676),m=a(677),p=function(e){var t=e.id,a=e.title,i=e.description,s=e.value,o=e.placeholder,p=e.updateValue,g=e.error,h=e.className,b=e.defaultValue,f=Object(n.useCallback)(function(e){return p(e,t)},[p]),v=c()("form-text-input",{"is-error":Boolean(g)});return r.a.createElement(u.a,{className:h},r.a.createElement(l.a,{label:a,name:t,placeholder:o,value:s,onChange:f,className:v,defaultValue:b}),g&&"string"===typeof g&&r.a.createElement(d.a,{text:g}),!g&&i&&r.a.createElement(m.a,null,i))};p.propTypes={id:s.a.string.isRequired,title:s.a.node,description:s.a.string,value:s.a.string,defaultValue:s.a.string,updateValue:s.a.func,error:s.a.oneOfType([s.a.string,s.a.bool]),className:s.a.string},t.a=p},688:function(e,t,a){},691:function(e,t,a){"use strict";a.d(t,"a",function(){return N});var n=a(52),r=a.n(n),i=a(78),s=a.n(i),o=a(91),c=a.n(o),l=a(85),u=a.n(l),d=a(93),m=a.n(d),p=a(92),g=a.n(p),h=a(5),b=a.n(h),f=a(112),v=a.n(f),E=a(19),y=a.n(E),_=a(2),k=a.n(_),O=a(61),C=a(182),N=function(e){function t(){var e,a;r()(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return a=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(m()(a),"renderChildren",function(){var e;e=a.props&&(Object.keys(a.props).length>1||!a.props.children)?k.a.createElement("div",a.props,a.props.children):a.props.children,a.context.store&&(e=k.a.createElement(O.a,{store:a.context.store},k.a.createElement(C.b,null,e))),v.a.render(e,a.container)}),a}return g()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.container=document.createElement("div"),document.body.appendChild(this.container),this.renderChildren()}},{key:"componentDidUpdate",value:function(){this.renderChildren()}},{key:"componentWillUnmount",value:function(){this.container&&(v.a.unmountComponentAtNode(this.container),document.body.removeChild(this.container),delete this.container)}},{key:"render",value:function(){return null}}]),t}(k.a.Component);b()(N,"contextTypes",{store:y.a.object})},692:function(e,t,a){"use strict";var n=a(52),r=a.n(n),i=a(78),s=a.n(i),o=a(91),c=a.n(o),l=a(85),u=a.n(l),d=a(93),m=a.n(d),p=a(92),g=a.n(p),h=a(5),b=a.n(h),f=a(19),v=a.n(f),E=a(2),y=a.n(E),_=a(32),k=a.n(_),O=a(8),C=a(0),N=a(705),I=a(849),w=a(261),j=a.n(w),x=(a(703),function(e){function t(){var e,a;r()(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return a=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(m()(a),"state",{expanded:a.props.expanded}),b()(m()(a),"onClick",function(){a.props.children&&a.setState({expanded:!a.state.expanded}),a.props.onClick&&a.props.onClick(),a.state.expanded?a.props.onClose(a.props.cardKey):a.props.onOpen(a.props.cardKey)}),a}return g()(t,e),s()(t,[{key:"componentWillReceiveProps",value:function(e){e.expanded!==this.props.expanded&&this.setState({expanded:e.expanded})}},{key:"getClickAction",value:function(){if(!this.props.disabled)return this.onClick}},{key:"getActionButton",value:function(){return this.state.expanded&&this.props.actionButtonExpanded||this.props.actionButton}},{key:"renderActionButton",value:function(){var e=this.props.clickableHeader?null:this.getClickAction();if(this.props.actionButton)return y.a.createElement("div",{className:"foldable-card__action",role:"presentation",onClick:e},this.getActionButton());if(this.props.children){var t=this.props.screenReaderText||this.props.translate("More");return y.a.createElement("button",{disabled:this.props.disabled,type:"button",className:"foldable-card__action foldable-card__expand",onClick:e},y.a.createElement(N.a,null,t),y.a.createElement(j.a,{icon:this.props.icon,size:24}))}}},{key:"renderContent",value:function(){return y.a.createElement("div",{className:"foldable-card__content"},this.props.children)}},{key:"renderHeader",value:function(){var e=this.props.summary?y.a.createElement("span",{className:"foldable-card__summary"},this.props.summary," "):null,t=this.props.expandedSummary?y.a.createElement("span",{className:"foldable-card__summary-expanded"},this.props.expandedSummary," "):null,a=this.props.clickableHeader?this.getClickAction():null,n=k()("foldable-card__header",{"is-clickable":!!this.props.clickableHeader,"has-border":!!this.props.summary});return y.a.createElement("div",{className:n,role:"presentation",onClick:a},y.a.createElement("span",{className:"foldable-card__main"},this.props.header," "),y.a.createElement("span",{className:"foldable-card__secondary"},e,t,this.renderActionButton()))}},{key:"render",value:function(){var e=k()("foldable-card","card",this.props.className,{"is-disabled":!!this.props.disabled,"is-expanded":!!this.state.expanded,"has-expanded-summary":!!this.props.expandedSummary,"is-compact":!!this.props.compact});return y.a.createElement(I.a,{className:e},this.renderHeader(),this.state.expanded&&this.renderContent())}}]),t}(E.Component));b()(x,"displayName","FoldableCard"),b()(x,"propTypes",{actionButton:v.a.element,actionButtonExpanded:v.a.element,cardKey:v.a.string,compact:v.a.bool,disabled:v.a.bool,expandedSummary:v.a.oneOfType([v.a.string,v.a.element]),expanded:v.a.bool,icon:v.a.string,onClick:v.a.func,onClose:v.a.func,onOpen:v.a.func,screenReaderText:v.a.oneOfType([v.a.string,v.a.bool]),summary:v.a.oneOfType([v.a.string,v.a.element])}),b()(x,"defaultProps",{onOpen:C.noop,onClose:C.noop,cardKey:"",icon:"chevron-down",expanded:!1,screenReaderText:!1}),t.a=Object(O.localize)(x)},694:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(69),s=a.n(i),o=a(52),c=a.n(o),l=a(78),u=a.n(l),d=a(91),m=a.n(d),p=a(85),g=a.n(p),h=a(92),b=a.n(h),f=a(2),v=a.n(f),E=a(19),y=a.n(E),_=a(714),k=a(32),O=a.n(k),C=function(e){function t(e){var a;return c()(this,t),(a=m()(this,g()(t).call(this,e))).state={isFocused:!1},a}return b()(t,e),u()(t,[{key:"handleFocusOutside",value:function(){this.setState({isFocused:!1})}},{key:"handleOnClick",value:function(e,t){this.setState({isFocused:!0}),"function"===typeof t&&t(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.value,i=t.help,o=t.className,c=t.instanceId,l=t.onChange,u=t.onClick,d=t.prefix,m=t.suffix,p=t.type,g=t.disabled,h=s()(t,["label","value","help","className","instanceId","onChange","onClick","prefix","suffix","type","disabled"]),b=this.state.isFocused,f="inspector-text-control-with-affixes-".concat(c),E=[];i&&E.push("".concat(f,"__help")),d&&E.push("".concat(f,"__prefix")),m&&E.push("".concat(f,"__suffix"));var y=O()(o,{"with-value":""!==n,empty:""===n,active:b&&!g}),k=O()("text-control-with-affixes",{"text-control-with-prefix":d,"text-control-with-suffix":m,disabled:g});return v.a.createElement(_.a,{label:a,id:f,help:i,className:y,onClick:function(t){return e.handleOnClick(t,u)}},v.a.createElement("div",{className:k},d&&v.a.createElement("span",{id:"".concat(f,"__prefix"),className:"text-control-with-affixes__prefix"},d),v.a.createElement("input",r()({className:"components-text-control__input",type:p,id:f,value:n,onChange:function(e){return l(e.target.value)},"aria-describedby":E.join(" "),disabled:g,onFocus:function(){return e.setState({isFocused:!0})}},h)),m&&v.a.createElement("span",{id:"".concat(f,"__suffix"),className:"text-control-with-affixes__suffix"},m)))}}]),t}(f.Component);C.defaultProps={type:"text"},C.propTypes={label:y.a.string,help:y.a.string,type:y.a.string,value:y.a.oneOfType([y.a.string,y.a.number]).isRequired,className:y.a.string,onChange:y.a.func.isRequired,prefix:y.a.node,suffix:y.a.node,disabled:y.a.bool},t.a=C},695:function(e,t,a){"use strict";var n=a(2),r=a.n(n),i=a(19),s=a.n(i),o=a(674),c=a(681),l=a(678),u=a(676),d=a(677),m=function(e){var t=e.id,a=e.valuesMap,i=e.title,s=e.description,m=e.value,p=e.updateValue,g=e.error,h=e.disabled,b=e.className,f=Object(n.useCallback)(function(e){return p(e.target.value,e)},[p]);return r.a.createElement(o.a,{className:b},r.a.createElement(l.a,null,i),r.a.createElement(c.a,{id:t,name:t,value:m,onChange:f,disabled:Boolean(h),isError:Boolean(g)},Object.keys(a).map(function(e){return r.a.createElement("option",{key:e,value:e},a[e])})),g&&"string"===typeof g&&r.a.createElement(u.a,{text:g}),!g&&s&&r.a.createElement(d.a,null,s))};m.propTypes={id:s.a.string.isRequired,valuesMap:s.a.object.isRequired,title:s.a.node,description:s.a.string,value:s.a.string.isRequired,updateValue:s.a.func.isRequired,error:s.a.oneOfType([s.a.string,s.a.bool]),disabled:s.a.bool,className:s.a.string},t.a=m},702:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(2),s=a.n(i),o=a(19),c=a.n(o),l=a(32),u=a.n(l),d=a(261),m=a.n(d),p=a(0),g=function(e){var t=e.className,a=e.disabled,n=e.checked,i=e.partialChecked,o=Object(p.omit)(e,["className","partialChecked"]);return s.a.createElement("span",{className:u()(t,"form-checkbox",{"is-disabled":a})},s.a.createElement("input",r()({},o,{type:"checkbox"})),n&&s.a.createElement(m.a,{icon:"checkmark",size:14}),!n&&i&&s.a.createElement(m.a,{icon:"minus-small",size:16}))};g.propTypes={checked:c.a.bool.isRequired,partialChecked:c.a.bool,onChange:c.a.func.isRequired,className:c.a.string},t.a=g},703:function(e,t,a){},713:function(e,t,a){"use strict";var n=a(2),r=a.n(n),i=a(19),s=a.n(i),o=a(735),c=a.n(o),l=a(736),u=a.n(l),d=a(737),m=a.n(d),p={ups:c.a,usps:u.a,dhlexpress:m.a,dhlecommerce:m.a,dhlecommerceasia:m.a},g=function(e){var t=e.carrier,a=e.size;if(!t||!p[t.toLowerCase()])return r.a.createElement("span",null);var n="".concat(function(e){switch(e){case"small":return 24;case"big":return 40;case"medium":default:return 30}}(a),"px");return r.a.createElement("div",{style:{width:n},className:"carrier-icon"},r.a.createElement("img",{src:p[t.toLowerCase()],alt:t,className:"carrier-icon__logo"}))};g.propTypes={carrier:s.a.string.isRequired,size:s.a.number},t.a=g},716:function(e,t,a){"use strict";var n=a(260),r=a.n(n),i=a(69),s=a.n(i),o=a(2),c=a.n(o),l=a(32),u=a.n(l);t.a=function(e){var t=e.className,a=s()(e,["className"]);return c.a.createElement("input",r()({},a,{type:"radio",className:u()(t,"form-radio")}))}},720:function(e,t,a){"use strict";var n=a(2),r=a.n(n),i=a(19),s=a.n(i),o=a(8),c=a(0),l=a(261),u=a.n(l),d=a(32),m=a.n(d),p=function(e){var t=e.isPlaceholder,a=e.data,n=e.dimensionUnit,i=e.prefixActions,s=(e.hasError,e.children),o=e.translate;if(t)return r.a.createElement("div",{className:"packages__packages-row placeholder"},r.a.createElement("div",{className:"packages__packages-row-icon"},r.a.createElement(u.a,{icon:"product",size:18})),r.a.createElement("div",{className:"packages__packages-row-details"},r.a.createElement("div",{className:"packages__packages-row-details-name"},r.a.createElement("span",null))),r.a.createElement("div",{className:"packages__packages-row-dimensions"},r.a.createElement("span",null)),r.a.createElement("div",{className:"packages__packages-row-actions"},s));var l,d=function(){return r.a.createElement("div",{className:"packages__packages-row-actions"},s)};return r.a.createElement("div",{className:m()("packages__packages-row",{prefixed:i})},i?d():null,r.a.createElement("div",{className:"packages__packages-row-icon"},function(e){var t=e?"mail":"product";return r.a.createElement(u.a,{icon:t,size:18})}(a.is_letter)),r.a.createElement("div",{className:"packages__packages-row-details"},r.a.createElement("div",{className:"packages__packages-row-details-name"},(l=a.name)&&""!==Object(c.trim)(l)?l:o("Untitled"))),r.a.createElement("div",{className:"packages__packages-row-dimensions"},a.inner_dimensions," ",n),i?null:d())};p.propTypes={siteId:s.a.number.isRequired,isPlaceholder:s.a.bool,data:s.a.shape({name:s.a.string,is_letter:s.a.bool,inner_dimensions:s.a.string}).isRequired,prefixActions:s.a.bool,dimensionUnit:s.a.string},t.a=Object(o.localize)(p)},721:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(6);function r(e,t,a){return{type:n.L,successAction:e,failureAction:t,onlyPackages:a||!1}}},735:function(e,t,a){e.exports=a.p+"images/881843a7135b8abd4794bd2d33dc8b3c.png"},736:function(e,t,a){e.exports=a.p+"images/41c6838923ebde874f7fc71db18dcae5.png"},737:function(e,t,a){e.exports=a.p+"images/224d57e46d3ace2d89e5c790bd828d32.png"},738:function(e,t,a){"use strict";var n=a(1),r=a.n(n),i=a(2),s=a.n(i),o=a(19),c=a.n(o),l=a(61),u=a(8),d=a(0),m=a(261),p=a.n(m),g=a(5),h=a.n(g),b=a(761),f=a(32),v=a.n(f),E=a(52),y=a.n(E),_=a(78),k=a.n(_),O=a(91),C=a.n(O),N=a(85),I=a.n(N),w=a(92),j=a.n(w),x=a(36);function S(e){return Object(d.get)(e,["currentUser","id"])}function R(e){var t=S(e);return t?function(e,t){return e.users.items[t]}(e,t):null}var q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(a){var n=R(a);return Object(d.get)(n,e,t)}};q("localeSlug"),q("localeVariant"),q("user_ip_country_code");q("date"),q("username"),q("email");q("email_verified",!1);var P=a(4),T=a(128);function z(e){var t=Object(P.a)(e);return t||1!==function(e){var t=R(e);return t?t.site_count||0:null}(e)||(t=function(e){var t=R(e);return Object(d.get)(t,"primary_blog",null)}(e)),Object(T.a)(e,t)}var D=a(39),A=function(e,t){return Object(d.get)(e,["extensions","woocommerce","sites",t,"settings","products"])},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(P.a)(e);return Object(d.isArray)(A(e,t))},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(P.a)(e);return D.b===A(e,t)};function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(P.a)(e),a=A(e,t);return Object(d.find)(a,function(e){return"woocommerce_dimension_unit"===e.id})||{}}var U=a(94),H=a(111),W=a(6),F=function(e){return function(t,a){if(!M(a(),e)&&!V(a(),e)){var n={type:W.N,siteId:e};return t(n),Object(U.a)(e).get("settings/products").then(function(a){t({type:W.O,siteId:e,data:a})}).catch(function(a){t(Object(H.a)(e,n,a))})}}},B=a(694),Z=function(e){function t(){return y()(this,t),C()(this,I()(t).apply(this,arguments))}return j()(t,e),k()(t,[{key:"componentDidMount",value:function(){var e=this.props.siteId;e&&this.props.fetchSettingsProducts(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.siteId!==this.props.siteId&&this.props.fetchSettingsProducts(e.siteId)}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.noWrap,n=e.dimensions,r=e.onChange,i=e.translate,o=e.dimensionsUnit,c=v()("form-dimensions-input",t,{"no-wrap":a});return s.a.createElement("div",{className:c},s.a.createElement(b.a,{name:"length",placeholder:i("L",{comment:"Length placeholder for dimensions input"}),type:"number",value:n&&n.length||"",onChange:function(e){return r(e,"length")},className:"form-dimensions-input__length"}),s.a.createElement(b.a,{name:"width",placeholder:i("W",{comment:"Width placeholder for dimensions input"}),type:"number",value:n&&n.width||"",onChange:function(e){return r(e,"width")},className:"form-dimensions-input__width"}),s.a.createElement(B.a,{name:"height",placeholder:i("H",{comment:"Height placeholder for dimensions input"}),suffix:o,type:"number",value:n&&n.height||"",onChange:function(e){return r(e,"height")},className:"form-dimensions-input__height"}))}}]),t}(i.Component);h()(Z,"propTypes",{className:c.a.string,dimensions:c.a.shape({width:c.a.string,height:c.a.string,length:c.a.string}),dimensionsUnit:c.a.string,onChange:c.a.func.isRequired,noWrap:c.a.bool}),h()(Z,"defaultProps",{value:"",className:"",onChange:d.noop,noWrap:!1});var Y=Object(l.b)(function(e,t){var a=t.dimensionsUnit,n=z(e);if(!a){var r=n&&L(e,n.ID);a=r&&r.value||"in"}return{siteId:n&&n.ID,dimensionsUnit:a}},function(e){return Object(x.b)({fetchSettingsProducts:F},e)})(Object(u.localize)(Z)),G=a(674),K=a(675),Q=a(681),J=a(676),$=/^\.\d+$/,X=/^\d+\.$/,ee=function(e){return e=Object(d.trim)(e),$.test(e)?e="0"+e:X.test(e)&&(e=e.slice(0,e.length-1)),e},te=/^\s*(\S+)\s*x\s*(\S+)\s*x\s*(\S+)\s*$/,ae=/^\s*(\S+)?\s*x\s*(\S+)?\s*x\s*(\S+)?\s*$/,ne=function(e){return isNaN(e)?"":0>e?"":e},re=function(e){var t="",a="",n="",r=ae.exec(e);return r&&4===r.length&&(t=ne(r[1]),a=ne(r[2]),n=ne(r[3])),{length:t,width:a,height:n}},ie=function(e){return Object(d.trim)(e)},se=ee,oe=function(e){var t=te.exec(e);return t?[t[1],t[2],t[3]].map(ee).join(" x "):e},ce=re,le=function(e){var t=re(e),a=t.length,n=t.width,r=t.height;return 0<a&&0<n&&0<r},ue=function(e){var t=e.siteId,a=e.form,n=e.setModalErrors,r=e.updatePackagesField,i=e.translate,o=a.mode,c=a.modalErrors,l=a.dimensionUnit,u=a.weightUnit,m=a.packageData,p=m.name,g=m.inner_dimensions,f=m.box_weight,E=m.is_letter,y=function(e,a){n(t,Object(d.omit)(c,e)),r(t,h()({},e,a))},_=function(e,t){y(t,e)},k=function(e,t){var a=t||i("Invalid value."),n=""===Object(d.trim)(m[e])?i("This field is required."):a;return c[e]?s.a.createElement(J.a,{text:n}):null},O=function(e){r(t,{is_letter:"envelope"===e.target.value})};return s.a.createElement("div",{className:"packages__properties-group"},"add-custom"===o?s.a.createElement(G.a,null,s.a.createElement(K.a,{htmlFor:"package_type"},i("Type of package")),s.a.createElement(Q.a,{id:"package_type",onChange:O,value:E?"envelope":"box"},s.a.createElement("option",{value:"box"},i("Box")),s.a.createElement("option",{value:"envelope"},i("Envelope")))):null,s.a.createElement(G.a,null,s.a.createElement(K.a,{htmlFor:"name"},i("Package name")),s.a.createElement(b.a,{id:"name",name:"name",placeholder:i("Unique package name"),value:p||"",onChange:function(e){return _(e,"name")},className:c.name?"is-error":""}),k("name",i("This field must be unique"))),s.a.createElement(G.a,{className:"packages__add-package-weight-group"},s.a.createElement("div",{className:"packages__add-package-weight"},s.a.createElement(K.a,null,i("Dimensions (L x W x H)")),function(e,t,a,n){var r=ce(t),i=r.length,o=r.width,c=r.height;return s.a.createElement(Y,{dimensionsUnit:a,dimensions:{width:o,height:c,length:i},onChange:function(t,a){n(e,["length"===a?t:i,"width"===a?t:o,"height"===a?t:c].join(" x "))}})}("inner_dimensions",g,l,y),k("inner_dimensions")),s.a.createElement("div",{className:"packages__add-package-weight"},s.a.createElement(K.a,{htmlFor:"box_weight"},i("Weight of empty package")),s.a.createElement(B.a,{id:"box_weight",name:"box_weight",placeholder:i("0.0"),value:f||"",onChange:function(e){return _(e,"box_weight")},className:v()("form-dimensions-input__box_weight",{"is-error":c.box_weight}),type:"number",suffix:u}),k("box_weight"))))};ue.propTypes={siteId:c.a.number.isRequired,form:c.a.object.isRequired,updatePackagesField:c.a.func.isRequired,packageData:c.a.shape({name:c.a.string.isRequired,inner_dimensions:c.a.string.isRequired,box_weight:c.a.number.isRequired,is_user_defined:c.a.bool.isRequired,is_letter:c.a.bool.isRequired}),setModalErrors:c.a.func.isRequired};var de=Object(u.localize)(ue),me=a(90),pe=a.n(me),ge=Object(d.memoize)(function(e){return pe()(e,{greedy:!0})}),he=function(e){return e&&""!==Object(d.trim)(e)?e:null},be=function(e,t){return e=he(e),Object(d.some)(t,function(t){return t===e})?null:e},fe=/^\d+(\.\d+)?$/,ve=function(e){return fe.test(e)?Number.parseFloat(e):null},Ee=function(e,t,a){var n,r=ge(a);return r(function(e,t){var a=ve(e.box_weight),n=ve(e.max_weight);a&&n&&n<=a&&(n=null);var r={name:be(e.name,t),inner_dimensions:e.inner_dimensions,outer_dimensions:he(e.outer_dimensions),box_weight:a,max_weight:n};return Object(d.omitBy)(r,function(e){return null===e})}(e,t)),n=r.errors,Object(d.reduce)(n,function(e,t){if(t.field){var a,n=t.field.replace("data.","");Object.assign(e,(a={},h()(a,n,!0),h()(a,"any",!0),a))}return e},{})},ye=a(683),_e=a(679),ke=a(685),Oe=a(852),Ce=function(e){var t=e.className,a=e.disabled,n=e.id,r=e.onToggle,i=e.readOnly,o=e.selectedElements,c=e.totalElements,l=o&&o===c,u=o&&o<c,d=v()("bulk-select__box",{"is-checked":l}),m=v()("bulk-select__some-checked-icon",{"is-disabled":a}),g=v()("bulk-select",t);return s.a.createElement("span",{className:g},s.a.createElement("span",{className:"bulk-select__container"},s.a.createElement("input",{id:n,type:"checkbox",className:d,onChange:function(e){i||r(!(u||l),e)},checked:l,disabled:a}),u?s.a.createElement(p.a,{className:m,icon:"minus-small",size:18}):null))};Ce.propTypes={totalElements:c.a.number.isRequired,selectedElements:c.a.number.isRequired,onToggle:c.a.func,readOnly:c.a.bool,className:c.a.string,disabled:c.a.bool};var Ne=Ce,Ie=a(692),we=a(720),je=a(70),xe=function(e){var t=e.siteId,a=e.form,n=e.toggleAll,r=e.togglePackage,i=e.currentlyEditingPredefinedPackages,o=e.translate,c=a.dimensionUnit,l=function(e){var a="group-".concat(e.serviceId,"-").concat(e.groupId);return s.a.createElement("div",{className:"packages__group-header"},s.a.createElement("label",{htmlFor:a,onClick:function(e){return e.stopPropagation()}},s.a.createElement(Ne,{id:a,totalElements:e.total,selectedElements:e.selected,onToggle:function(a,r){r.stopPropagation(),n(t,e.serviceId,e.groupId,r.target.checked)},className:"packages__group-header-checkbox"}),e.title))};return s.a.createElement("div",null,function(){var e=[];return Object(d.forEach)(i,function(a,n){var i,u,d=(i=a.selected,u=a.total,i===u?o("All packages selected"):o("%(selectedCount)d package selected","%(selectedCount)d packages selected",{count:i,args:{selectedCount:i}}));e.push(s.a.createElement(Ie.a,{className:"packages__predefined-packages",key:n,header:l(a),summary:d,expandedSummary:d,clickableHeader:!0,expanded:!1,screenReaderText:o("Expand Services"),icon:"chevron-down"},function(e){return e.packages.map(function(e,a){return s.a.createElement(we.a,{key:a,siteId:t,data:e,dimensionUnit:c,prefixActions:!0},s.a.createElement(Oe.a,{className:"form-checkbox packages__packages-row-actions",checked:e.selected,onChange:function(){return r(t,e.serviceId,e.id)}}))})}(a)))}),e}())};xe.propTypes={siteId:c.a.number.isRequired,toggleAll:c.a.func.isRequired,togglePackage:c.a.func.isRequired,form:c.a.shape({dimensionUnit:c.a.string}).isRequired};var Se=Object(l.b)(function(e){return{currentlyEditingPredefinedPackages:Object(je.c)(e)}})(Object(u.localize)(xe)),Re=a(93),qe=a.n(Re),Pe=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=C()(this,(e=I()(t)).call.apply(e,[this].concat(r))),h()(qe()(a),"handleKeyEvent",function(e){switch(e.keyCode){case 13:case 32:e.preventDefault(),document.activeElement.click()}}),a}return j()(t,e),k()(t,[{key:"render",value:function(){var e=v()({"segmented-control__item":!0,"is-selected":this.props.selected}),t=v()("segmented-control__link",h()({},"item-index-".concat(this.props.index),null!=this.props.index));return s.a.createElement("li",{className:e},s.a.createElement("a",{href:this.props.path,className:t,onClick:this.props.onClick,title:this.props.title,"data-e2e-value":this.props.value,role:"radio",tabIndex:0,"aria-checked":this.props.selected,onKeyDown:this.handleKeyEvent},s.a.createElement("span",{className:"segmented-control__text"},this.props.children)))}}]),t}(s.a.Component);h()(Pe,"propTypes",{children:c.a.node.isRequired,path:c.a.string,selected:c.a.bool,title:c.a.string,value:c.a.string,onClick:c.a.func,index:c.a.number}),h()(Pe,"defaultProps",{selected:!1});var Te=Pe,ze=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=C()(this,(e=I()(t)).call.apply(e,[this].concat(r))),h()(qe()(a),"state",{selected:a.props.initialSelected||a.props.options[0].value}),a}return j()(t,e),k()(t,[{key:"renderOptions",value:function(){var e=this;return this.props.options.map(function(t,a){return s.a.createElement(Te,{index:a,key:a,onClick:function(){e.setState({selected:t.value}),e.props.onSelect&&e.props.onSelect(t)},path:t.path,selected:e.state.selected===t.value,value:t.value},t.label)})}},{key:"render",value:function(){var e={"is-compact":this.props.compact,"is-primary":this.props.primary};return s.a.createElement("ul",{className:v()("segmented-control",e,this.props.className),style:this.props.style,role:"radiogroup"},this.renderOptions())}}]),t}(s.a.Component);h()(ze,"propTypes",{className:c.a.string,compact:c.a.bool,initialSelected:c.a.string,onSelect:c.a.func,options:c.a.arrayOf(c.a.shape({value:c.a.string.isRequired,label:c.a.string.isRequired,path:c.a.string})).isRequired,style:c.a.object});var De=a(721),Ae=a(24),Me=a(262),Ve=function(e){var t,a=e.siteId,n=e.form,r=e.predefinedPackagesSummary,i=e.setModalErrors,o=e.savePackage,c=e.savePredefinedPackages,l=e.dismissModal,u=e.removePackage,m=e.setAddMode,g=e.updatePackagesField,h=e.translate,b=n.showModal,f=n.mode,v=n.packages,E=n.packageSchema,y=n.predefinedSchema,_=n.packageData,k=_.index,O=v.custom,C="edit"===f,N="add-custom"===f,I="add-predefined"===f,w=function(){var t={duration:5e3};e.createWcsShippingSaveActionList(function(){return"function"===typeof e.onSaveSuccess&&"name"in _&&e.onSaveSuccess(_.name),e.successNotice(h("Your shipping packages have been saved."),t)},function(){return e.errorNotice(h("Unable to save your shipping packages. Please try again."),t)},!0)},j=function(){l(a)},x=h(C?"Edit package":"Add a package"),S=N||I,R=N||C,q=I;t=N||I&&0===r.removed?h("Add package","Add packages",{count:N?1:r.added}):h("Done");var P=[s.a.createElement(ke.a,{onClick:function(){if(I)return c(a),void(e.persistOnSave&&w());var t="number"===typeof _.index?O[_.index].name:null,n=Object(d.concat)(Object(d.difference)(O.map(function(e){return e.name}),[t]),Object(d.flatten)(Object(d.map)(y,function(e){return Object(d.map)(e,function(e){return e.definitions})})),["individual"]),r=Object.assign({},_,{name:ie(_.name),inner_dimensions:oe(_.inner_dimensions),outer_dimensions:oe(_.outer_dimensions),box_weight:se(_.box_weight),max_weight:0}),s=Ee(r,n,E);if(le(r.inner_dimensions)||(s.any=!0,s.inner_dimensions=!0),s.any)return g(a,r),void i(a,s);o(a,r),e.persistOnSave&&w()}},t),s.a.createElement(ke.a,{onClick:j,isPrimary:!1},h("Cancel"))];return C&&P.unshift({action:"delete",label:s.a.createElement("span",null,h("{{icon/}} Delete this package",{components:{icon:s.a.createElement(p.a,{icon:"trash"})}})),onClick:function(){return u(a,k)},additionalClassNames:"packages__delete is-scary is-borderless"}),s.a.createElement(ye.a,{isVisible:b,additionalClassNames:"packages__add-edit-dialog woocommerce wcc-root",onClose:j,buttons:P},s.a.createElement(_e.a,{className:"packages__add-edit-title"},x),S&&s.a.createElement(ze,{primary:!0,className:"packages__mode-select",initialSelected:f,onSelect:function(e){m(a,e.value)},options:[{value:"add-custom",label:"Custom package"},{value:"add-predefined",label:"Service package"}]}),R&&s.a.createElement(de,e),q&&s.a.createElement(Se,e))};Ve.propTypes={siteId:c.a.number.isRequired,dismissModal:c.a.func.isRequired,form:c.a.object.isRequired,updatePackagesField:c.a.func.isRequired,savePackage:c.a.func.isRequired,packageData:c.a.shape({index:c.a.number.isRequired}),setModalErrors:c.a.func.isRequired,removePackage:c.a.func.isRequired,setAddMode:c.a.func.isRequired};t.a=Object(l.b)(function(e){return{predefinedPackagesSummary:Object(je.f)(e)}},function(e){return Object(x.b)(r()({createWcsShippingSaveActionList:De.a,errorNotice:Ae.a,successNotice:Ae.d},Me),e)})(Object(u.localize)(Ve))},835:function(e,t,a){},836:function(e,t,a){},837:function(e,t,a){"use strict";(function(e){var n=a(62),r=a.n(n),i=a(5),s=a.n(i),o=a(1),c=a.n(o),l=a(53),u=a.n(l),d=a(2),m=a.n(d),p=a(8);t.a=Object(p.localize)(function(t){var a=t.isVisible,n=t.onClose,i=t.translate,o=Object(d.useState)(""),l=u()(o,2),p=l[0],g=l[1],h=Object(d.useState)({}),b=u()(h,2),f=b[0],v=b[1],E=Object(d.useState)(!1),y=u()(E,2),_=y[0],k=y[1],O=Object(d.useState)(!1),C=u()(O,2),N=C[0],I=C[1],w=Object(d.useState)(!1),j=u()(w,2),x=j[0],S=j[1],R=[{value:"missing_features",label:i("The new plugin is missing a feature I rely on.")},{value:"disruption_concerns",label:i("I'm concerned switching will be difficult or disrupt my current workflow.")},{value:"tried_had_issues",label:i("I tried the new WooCommerce Shipping before and had a problem or found it confusing.")},{value:"unaware",label:i("I wasn't aware there was a new WooCommerce Shipping plugin.")},{value:"unsure_benefits",label:i("I'm not sure what the benefits of switching are.")},{value:"no_time",label:i("I just haven't had time to look into it.")},{value:"other",label:i("Other")}],q={missing_features:{type:"textarea",label:i("Could you tell us which feature is most important to you? Your feedback directly helps us prioritize what to build next.")},disruption_concerns:{type:"textarea",label:i("What is your biggest concern about the switching process? This will help us make sure you can migrate with confidence and ease.")},tried_had_issues:{type:"textarea",label:i("Could you briefly describe the problem you ran into? This helps us fix bugs and improve the design.")},unsure_benefits:{type:"textarea",label:i("What's the most important thing to you when it comes to shipping? (e.g. saving money, saving time, carrier options)")},unaware:{type:"textarea",label:i("What's the most important thing to you when it comes to shipping? (e.g. saving money, saving time, carrier options)")},no_time:{type:"textarea",label:i("Knowing the switch takes less than five minutes, what's one thing that would convince you to try it?")},other:{type:"textarea",label:i("We'd love to hear more. Could you please share your reason with us?")}},P=function(){var t=r()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(window.wcsMigrationSurvey.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"wcs_migration_survey_track_display",nonce:window.wcsMigrationSurvey.nonce})});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}},t,null,[[0,5]])}));return function(){return t.apply(this,arguments)}}(),T=function(){var t=r()(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(window.wcsMigrationSurvey.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"wcs_migration_survey_submit",nonce:window.wcsMigrationSurvey.nonce,survey_data:JSON.stringify(a)})});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}},t,null,[[0,5]])}));return function(e){return t.apply(this,arguments)}}();m.a.useEffect(function(){a&&window.wcsMigrationSurvey&&P()},[a]);var z=function(){var e=r()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return I(!0),e.prev=3,e.next=6,T({primary:p,followup:f});case 6:S(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),I(!1);case 12:case"end":return e.stop()}},e,null,[[3,9]])}));return function(){return e.apply(this,arguments)}}(),D=function(){var t=r()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(window.wcsMigrationSurvey.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"wcs_migration_survey_dismiss",nonce:window.wcsMigrationSurvey.nonce})});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:n();case 8:case"end":return t.stop()}},t,null,[[0,5]])}));return function(){return t.apply(this,arguments)}}();return a?x?m.a.createElement("div",{className:"migration-survey__modal-backdrop"},m.a.createElement("div",{className:"migration-survey__modal"},m.a.createElement("div",{className:"migration-survey__modal-header"},m.a.createElement("h3",null,i("Thank you!")),m.a.createElement("button",{className:"migration-survey__modal-close",onClick:n,"aria-label":i("Close")},"\xd7")),m.a.createElement("div",{className:"migration-survey__modal-content"},m.a.createElement("p",null,i("Your feedback is incredibly valuable. We want to make sure the new WooCommerce Shipping is an excellent replacement for you before we officially retire the shipping functionality in this plugin.")),m.a.createElement("p",null,i("P.S. While we work on improvements, did you know the new WooCommerce Shipping includes discounted UPS rates? You can print USPS, DHL, and now UPS labels right from your dashboard \u2013 no separate accounts needed. Want to see how easy it is?")," ",m.a.createElement("a",{href:"https://woocommerce.com/document/woocommerce-shipping-and-tax/woocommerce-shipping/#how-do-i-migrate-from-wcst",target:"_blank",rel:"noopener noreferrer"},i("Read the migration guide.")))),m.a.createElement("div",{className:"migration-survey__modal-footer"},m.a.createElement("button",{className:"migration-survey__button button is-primary",onClick:n,"aria-label":i("Close after submitting feedback")},i("Close"))))):m.a.createElement("div",{className:"migration-survey__modal-backdrop"},m.a.createElement("div",{className:"migration-survey__modal"},m.a.createElement("div",{className:"migration-survey__modal-header"},m.a.createElement("h3",null,i("A Quick Question About Shipping")),m.a.createElement("button",{className:"migration-survey__modal-close",onClick:D,type:"button","aria-label":i("Close survey")},"\xd7")),m.a.createElement("div",{className:"migration-survey__modal-content"},m.a.createElement("p",null,i("Thanks for shipping with Woo! We are preparing to transition to the new WooCommerce Shipping plugin as our single officially supported shipping solution. To help us make it a great experience for you, could you answer one quick question?")),m.a.createElement("div",{className:"migration-survey__question"},m.a.createElement("h4",null,i("What's the main reason you're still using WooCommerce Shipping & Tax as your shipping tool?")),R.map(function(e){return m.a.createElement("label",{key:e.value,className:"migration-survey__option"},m.a.createElement("input",{className:"migration-survey__radio",type:"radio",name:"primary_reason",value:e.value,checked:p===e.value,onChange:function(){return t=e.value,g(t),v({}),void k(!0);var t}}),m.a.createElement("span",null,e.label))})),_&&q[p]&&m.a.createElement("div",{className:"migration-survey__question migration-survey__followup"},m.a.createElement("div",{className:"migration-survey__option"},m.a.createElement("div",null,m.a.createElement("label",{htmlFor:"followup_textarea"},q[p].label),m.a.createElement("textarea",{id:"followup_textarea",value:f.text||"",onChange:function(e){return t="text",a=e.target.value,void v(function(e){return c()({},e,s()({},t,a))});var t,a},rows:"3",className:"migration-survey__textarea"}))))),m.a.createElement("div",{className:"migration-survey__modal-footer"},m.a.createElement("button",{className:"migration-survey__button button is-secondary",onClick:D,disabled:N,type:"button","aria-label":i("Skip")},i("Skip")),m.a.createElement("button",{className:"migration-survey__button button is-primary",onClick:z,disabled:!p||N,type:"button","aria-label":i(N?"Submitting\u2026":"Submit Feedback")},i(N?"Submitting\u2026":"Submit Feedback"))))):null})}).call(this,a(155))},845:function(e,t,a){"use strict";a.r(t);var n=a(53),r=a.n(n),i=a(2),s=a.n(i),o=a(19),c=a.n(o),l=a(61),u=a(36),d=a(8),m=a.n(d),p=a(672),g=a(1),h=a.n(g),b=a(260),f=a.n(b),v=a(0),E=a(5),y=a.n(E),_=a(686),k=a(680),O=a(685),C=a(695),N=a(54),I=a(32),w=a.n(I),j=a(675),x=a(716),S=function(e){var t=e.values,a=e.originalValues,n=e.countryNames,r=e.stateNames,i=e.expandStateName,o=void 0!==i&&i;a=a||{};var c=t.state,l=t.country,u="";c&&(u=(o&&r||{})[c]||c);var d=n[l]||l,m=function(e){var n=t[e];if(!n)return"";var r=a[e],i=r&&r.toLowerCase()!==n.toLowerCase(),o=n;switch(e){case"state":o=u;break;case"country":o=d}return s.a.createElement("span",{key:e,className:i?"highlight":""},o)},p=""!==m("company")?s.a.createElement("p",null,m("company")):"",g=m("state"),h=Object(v.filter)([m("city"),g?", ":"",g," ",m("postcode")]);return s.a.createElement("div",{className:"address-step__summary"},s.a.createElement("p",null,m("name")),p,s.a.createElement("p",null,m("address")," ",m("address_2")),s.a.createElement("p",null,h),s.a.createElement("p",null,m("country")))},R=function(e){return s.a.createElement(j.a,{className:w()("address-step__suggestion",{"is-selected":e.checked})},s.a.createElement(x.a,Object(v.omit)(e,"children")),e.children)},q=function(e){var t=e.values,a=e.normalized,n=e.selectNormalized,r=e.selectNormalizedAddress,i=e.editAddress,o=e.confirmAddressSuggestion,c=e.countryNames,l=e.translate,u=function(e){return function(){return r(e)}};return s.a.createElement("div",null,s.a.createElement(k.a,{className:"error-notice",status:"is-info",showDismiss:!1},l("We have slightly modified the address entered. If correct, please use the suggested address to ensure accurate delivery.")),s.a.createElement("div",{className:"address-step__suggestion-container"},s.a.createElement(R,{checked:!n,onChange:u(!1)},s.a.createElement("span",{className:"address-step__suggestion-title"},l("Address entered")),s.a.createElement(S,{values:t,countryNames:c})),s.a.createElement(R,{checked:n,onChange:u(!0)},s.a.createElement("span",{className:"address-step__suggestion-title"},l("Suggested address")),s.a.createElement(S,{values:a,originalValues:t,countryNames:c}))),s.a.createElement("div",{className:"address-step__actions"},s.a.createElement(O.a,{type:"button",onClick:o},l("Use selected address")),s.a.createElement(O.a,{type:"button",onClick:i,borderless:!0},l("Edit address"))))};q.propTypes={values:c.a.object.isRequired,normalized:c.a.object,selectNormalized:c.a.bool.isRequired,selectNormalizedAddress:c.a.func.isRequired,confirmAddressSuggestion:c.a.func.isRequired,editAddress:c.a.func.isRequired,countryNames:c.a.object.isRequired};var P=Object(d.localize)(q),T=a(829),z=a.n(T),D=a(839),A=a(60),M=function(e){var t=e.values,a=e.countryNames,n=e.editUnverifiableAddress,r=e.confirmAddressSuggestion,i=e.translate,o=e.fieldErrors,c=A.a.includes(t.country)?z.a.format({scheme:"https",hostname:"tools.usps.com",pathname:"/zip-code-lookup.htm",query:{mode:"byAddress",companyName:t.company,address1:t.address,address2:t.address_2,city:t.city,state:"US"===t.country?t.state:t.country,zip:t.postcode}}):null,l=Object(v.invokeMap)([t.address+" "+t.address_2,t.city,t.state+" "+t.postcode],"trim").join(", "),u={scheme:"https",hostname:"www.google.com",pathname:"/maps/place/"+encodeURIComponent(l)},d=z.a.format(u);return s.a.createElement("div",null,function(){var e=function(){if(o.general)return o.general;for(var e in o)return o[e];return!1}();return e?s.a.createElement(k.a,{status:"is-error",showDismiss:!1},i("We were unable to automatically verify the address \u2014 %(error)s.",{args:{error:e}})):s.a.createElement(k.a,{status:"is-error",showDismiss:!1},i("We were unable to automatically verify the address."))}(),s.a.createElement("div",{className:"address-step__unverifiable-container"},s.a.createElement("div",{className:"address-step__unverifiable-info"},s.a.createElement("span",{className:"address-step__unverifiable-title"},i("Address entered")),s.a.createElement(S,{values:t,countryNames:a})),s.a.createElement("div",{className:"address-step__unverifiable-info"},s.a.createElement("p",null,i("Automatic verification failed for this address. It may still be a valid address \u2014 use the tools below to manually verify.")),c&&s.a.createElement(D.a,{href:c},i("Verify with USPS")),s.a.createElement(D.a,{href:d},i("View on Google Maps")))),s.a.createElement("div",{className:"address-step__actions"},s.a.createElement(O.a,{type:"button",onClick:n},i("Edit address")),s.a.createElement(O.a,{type:"button",onClick:r,borderless:!0},i("Use address as entered"))))};M.propTypes={values:c.a.object.isRequired,confirmAddressSuggestion:c.a.func.isRequired,editUnverifiableAddress:c.a.func.isRequired,countryNames:c.a.object.isRequired};var V=Object(d.localize)(M),L=a(154),U=a(127),H=a(11),W=a(48),F=function(e){var t=e.siteId,a=e.orderId,n=e.values,r=e.isNormalized,i=e.normalized,o=e.selectNormalized,c=e.normalizationInProgress,l=e.allowChangeCountry,u=e.group,d=e.countryNames,m=e.stateNames,p=e.errors,g=e.isUsable,b=e.translate,f=Object(v.isObject)(p)?p:{},E=function(){return e.confirmAddressSuggestion(a,t,u)};if(r&&!f.phone){if(i&&!Object(v.isEqual)(i,n)){return s.a.createElement(P,{values:n,normalized:i,selectNormalized:o,selectNormalizedAddress:function(n){return e.selectNormalizedAddress(a,t,u,n)},confirmAddressSuggestion:E,editAddress:function(){return e.editAddress(a,t,u)},countryNames:d})}if(0<Object(v.size)(f)){return s.a.createElement(V,{values:n,confirmAddressSuggestion:E,editUnverifiableAddress:function(){return e.editUnverifiableAddress(a,t,u)},countryNames:d,fieldErrors:f})}}var y=f.general&&1===Object(v.size)(f),I=function(e){return u+"_"+e},w=function(e){return n[e]?Object(L.a)(n[e]):""},j=function(n){return function(r){return e.updateAddressValue(a,t,u,n,r)}};return s.a.createElement("div",null,s.a.createElement(_.a,{id:I("name"),title:b("Name"),value:w("name"),updateValue:j("name"),error:f.name}),s.a.createElement("div",{className:"address-step__company-phone"},s.a.createElement(_.a,{id:I("company"),title:b("Company"),value:w("company"),updateValue:j("company"),className:"address-step__company",error:f.company}),s.a.createElement(_.a,{id:I("phone"),title:b("Phone"),value:w("phone"),updateValue:j("phone"),className:"address-step__phone",error:f.phone})),y&&s.a.createElement(k.a,{status:"is-error",showDismiss:!1},b("%(message)s. Please modify the address and try again.",{args:{message:f.general}})),s.a.createElement(_.a,{id:I("address"),title:b("Address"),value:w("address"),updateValue:j("address"),className:"address-step__address-1",error:f.address||y}),s.a.createElement(_.a,{id:I("address_2"),value:w("address_2"),updateValue:j("address_2"),error:f.address_2||y}),s.a.createElement("div",{className:"address-step__city-state-postal-code"},s.a.createElement(_.a,{id:I("city"),title:b("City"),value:w("city"),updateValue:j("city"),className:"address-step__city",error:f.city||y}),m?s.a.createElement(C.a,{id:I("state"),title:b("State"),value:w("state"),valuesMap:h()({"":e.translate("Select one\u2026")},m),updateValue:j("state"),className:"address-step__state",error:f.state||y}):s.a.createElement(_.a,{id:I("state"),title:b("State"),value:w("state"),updateValue:j("state"),className:"address-step__state",error:f.state||y}),s.a.createElement(_.a,{id:I("postcode"),title:b("ZIP/Postal code"),value:w("postcode"),updateValue:j("postcode"),className:"address-step__postal-code",error:f.postcode||y})),s.a.createElement(C.a,{id:I("country"),title:b("Country"),value:w("country"),disabled:!l,valuesMap:d,updateValue:j("country"),error:f.country||y}),s.a.createElement("div",{className:"address-step__actions"},s.a.createElement(O.a,{type:"button",disabled:Object(N.a)(p)||c,onClick:function(){return e.submitAddressForNormalization(a,t,u)}},b("Verify address")),s.a.createElement(O.a,{type:"button",disabled:!g,onClick:E,borderless:!0},b("Use address as entered"))))};F.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,values:c.a.object.isRequired,isNormalized:c.a.bool.isRequired,normalized:c.a.object,selectNormalized:c.a.bool.isRequired,allowChangeCountry:c.a.bool.isRequired,errors:c.a.oneOfType([c.a.object,c.a.bool]).isRequired,group:c.a.string.isRequired,countryNames:c.a.object.isRequired,stateNames:c.a.object};var B=Object(l.b)(function(e,t){var a=t.group,n=t.orderId,r=t.siteId,i=Object(H.x)(e,n,r),s=Object(H.k)(e,n,r).form[a],o="origin"===a?Object(H.i)(e,r):Object(H.c)(e,r);return o[s.values.country]||(o=h()(y()({},s.values.country,Object(W.g)(e,s.values.country,r)),o)),h()({},s,{errors:i&&Object(H.f)(e,n,r)[a],isUsable:i&&Object(H.r)(e,n,a,r),countryNames:o,stateNames:Object(H.m)(e,s.values.country,r)})},function(e){return Object(u.b)({selectNormalizedAddress:U.C,confirmAddressSuggestion:U.g,editAddress:U.m,editUnverifiableAddress:U.n,updateAddressValue:U.X,submitAddressForNormalization:U.V},e)})(Object(d.localize)(F)),Z=a(261),Y=a.n(Z),G=a(52),K=a.n(G),Q=a(78),J=a.n(Q),$=a(91),X=a.n($),ee=a(85),te=a.n(ee),ae=a(92),ne=a.n(ae),re=(a(835),function(e){function t(){return K()(this,t),X()(this,te()(t).apply(this,arguments))}return ne()(t,e),J()(t,[{key:"render",value:function(){var e=w()("spinner",this.props.className),t={width:this.props.size,height:this.props.size,fontSize:this.props.size};return s.a.createElement("div",{className:e},s.a.createElement("div",{className:"spinner__outer",style:t},s.a.createElement("div",{className:"spinner__inner"})))}}]),t}(i.PureComponent));y()(re,"propTypes",{className:c.a.string,size:c.a.number}),y()(re,"defaultProps",{size:20});var ie=a(692),se=function(e){var t=e.isSuccess,a=e.isWarning,n=e.isError,r=e.isProgress,i=e.title,o=e.summary,c=e.children,l=e.expanded,u=e.toggleStep,d=e.translate,m=w()({"is-success":t,"is-warning":a,"is-error":n});o=s.a.createElement("span",{className:m},s.a.createElement("span",null,o),s.a.createElement("div",{className:"label-purchase-modal__step-status"},r?s.a.createElement(re,{size:18}):s.a.createElement(Y.a,{icon:t?"checkmark-circle":a?"notice-outline":n?"notice-outline":"",className:m,size:18})));var p=s.a.createElement("div",null,s.a.createElement("div",{className:"label-purchase-modal__step-title"},i));return s.a.createElement(ie.a,{header:p,summary:o,expandedSummary:o,clickableHeader:!0,compact:!0,screenReaderText:d("Expand"),expanded:l,onClick:u},c)};se.propTypes={isSuccess:c.a.bool,isWarning:c.a.bool,isError:c.a.bool,isProgress:c.a.bool,title:c.a.string.isRequired,summary:c.a.string,expanded:c.a.bool};var oe=Object(d.localize)(se),ce=a(55),le=function(e,t,a,n,r,i){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=e.isNormalized,c=e.normalizationInProgress,l=e.normalized;if(c)return r("Validating address\u2026");if(Object(N.a)(n)||o&&!l)return n&&n.general||r("Invalid address");if(!o)return r("You've edited the address, please revalidate it for accurate rates");var u=Object(ce.a)(e);if(!de(u))return r("One of the address data has non-roman character(s) that might not be printed properly!");var d=Object(ce.a)(e),m=d.city,p=d.postcode,g=d.state,h=d.country,b=m+", ";g&&(b+=(s?Object(W.i)(t,h,g,a):g)+"\xa0 ");return b+="US"===h?p.split("-")[0]:p,i&&(b+=", "+Object(W.g)(t,h,a)),b},ue=function(e){var t=e.normalizationInProgress,a=e.errors,n=e.isNormalized,r=e.values,i=e.normalized;return t?{isProgress:!0}:Object(N.a)(a)||n&&!i||!n?{isError:!0}:de(r)?n?Object(v.isEqual)(r,i)?{isSuccess:!0}:{isWarning:!0}:{}:{isWarning:!0}},de=function(e){for(var t in e)if(a=e[t],/[^\u0000-\u007f]/.test(a))return!1;var a;return!0},me=function(e){return s.a.createElement(oe,f()({title:e.title,summary:e.summary,expanded:e.expanded,toggleStep:function(){return e.toggleStep(e.orderId,e.siteId,e.type)}},e.normalizationStatus),s.a.createElement(B,{group:e.type,siteId:e.siteId,orderId:e.orderId}))};me.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,type:c.a.string.isRequired,title:c.a.string.isRequired,summary:c.a.string.isRequired,expanded:c.a.bool,normalizationStatus:c.a.object.isRequired,toggleStep:c.a.func.isRequired};var pe=Object(d.localize)(Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=t.type,i=t.translate,s=Object(H.x)(e,a,n),o=Object(H.k)(e,a,n),c=o.form[r],l=s&&Object(H.f)(e,a,n)[r],u="destination"===r&&o.form.origin.values.country!==c.values.country;return{errors:l,form:c,expanded:c.expanded,normalizationStatus:ue(h()({},c,{errors:l})),summary:le(c,e,n,l,i,u)}},function(e){return Object(u.b)({toggleStep:U.W},e)})(me)),ge=a(160),he=function(e,t,a){var n=0;return Object(v.mapValues)(e,function(e){if("individual"===e.box_id)return e.items[0].name;n++;var r=t[e.box_id],i=r&&r.is_letter,s=!(!a||!r)&&r.name;return i?s?Object(d.translate)("Envelope %(packageNum)d: %(packageName)s",{args:{packageNum:n,packageName:s}}):Object(d.translate)("Envelope %(packageNum)d",{args:{packageNum:n}}):s?Object(d.translate)("Package %(packageNum)d: %(packageName)s",{args:{packageNum:n,packageName:s}}):Object(d.translate)("Package %(packageNum)d",{args:{packageNum:n}})})},be=a(70),fe=function(e){var t,a,n=e.orderId,r=e.siteId,i=e.selected,o=e.all,c=e.errors,l=e.packageId,u=e.translate,d=function(t,a,i){var o=0<Object.keys(c[t]||{}).length;return s.a.createElement("div",{className:"packages-step__list-item",key:t},s.a.createElement(ge.a,{className:w()("packages-step__list-package","is-borderless",{"is-selected":l===t}),onClick:function(){return e.openPackage(n,r,t)}},s.a.createElement("span",{className:"packages-step__list-package-name"},a),function(e,t){return e?s.a.createElement(Y.a,{icon:"notice-outline",className:"is-error",size:18}):void 0===t?null:s.a.createElement("span",{className:"packages-step__list-package-count"},t)}(o,i)))},m=he(i,o,!1),p=[],g=[];return Object.keys(i).forEach(function(e){var t=i[e];"individual"===t.box_id?g.push(d(e,t.items[0].name)):p.push(d(e,m[e],t.items.length))}),(p.length||g.length)&&p.unshift((t="boxed-header",a=u("Packages to be Shipped"),s.a.createElement("div",{className:"packages-step__list-item packages-step__list-header",key:t},a))),s.a.createElement("div",{className:"packages-step__list"},p,g)};fe.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,selected:c.a.object.isRequired,all:c.a.object.isRequired,packageId:c.a.string.isRequired,errors:c.a.object,openPackage:c.a.func.isRequired};var ve=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n);return{errors:r&&Object(H.f)(e,a,n).packages,packageId:i.openedPackageId,selected:i.form.packages.selected,all:Object(be.a)(e,n)}},function(e){return Object(u.b)({openPackage:U.w},e)})(Object(d.localize)(fe)),Ee=a(676),ye=a(678),_e=a(694),ke=a(128),Oe=function(e){var t=e.orderId,a=e.siteId,n=e.item,r=e.itemIndex,i=e.translate,o=function(){return e.openItemMove(t,a,r)},c=n.url?s.a.createElement("a",{href:n.url,target:"_blank",rel:"noopener noreferrer"},n.name):n.name;return s.a.createElement("div",{key:r,className:"packages-step__item"},s.a.createElement("div",{className:"packages-step__item-name"},s.a.createElement("span",null,c),"attributes"in n?s.a.createElement("p",null,n.attributes):""),s.a.createElement("div",{className:"packages-step__item-weight"},"weight"in n?s.a.createElement("p",null,n.weight):""),s.a.createElement("div",{className:"packages-step__item-qty"},"quantity"in n?s.a.createElement("p",null,n.quantity):""),s.a.createElement("div",{className:"packages-step__item-move"},s.a.createElement("a",{href:"#",onClick:o},i("Move"))))};Oe.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,item:c.a.object.isRequired,itemIndex:c.a.number.isRequired,openItemMove:c.a.func.isRequired};var Ce=Object(l.b)(function(e,t){var a=t.siteId;return{site:Object(ke.a)(e,a)}},function(e){return Object(u.b)({openItemMove:U.v},e)})(Object(d.localize)(Oe)),Ne=a(681),Ie=a(424),we=a(738),je=a(262),xe=function(e,t){return[e.length,e.width,e.height].map(function(e){return"".concat(e," ").concat(t)}).join(" x ")},Se=function(e){var t=e.siteId,a=e.orderId,n=e.packageId,r=e.pckg,i=e.dimensionUnit,o=e.packageGroups,c=e.translate,l=e.pckgErrors,u=e.isIndividualPackage,d=function(e){var t=Object(Ie.a)(e),a=e.id||e.name;return s.a.createElement("option",{value:a,key:a},e.name," - ",xe(t,i))};if(!n)return null;if(u){var m=w()({"is-error":l.dimensions});return s.a.createElement("div",null,s.a.createElement("div",{className:"packages-step__package-items-header"},s.a.createElement(ye.a,null,c("Individually Shipped Item"))),s.a.createElement("span",{className:"packages-step__package-item-description"},c("Item Dimensions")," -"," "),s.a.createElement("span",{className:m},xe(r,i)),l.dimensions&&s.a.createElement(Ee.a,{text:l.dimensions}))}var p=Object(v.reduce)(o,function(e,t){return e+t.definitions.length},0);return s.a.createElement("div",null,s.a.createElement("div",{className:"packages-step__package-items-header packages-step__package-details-header"},s.a.createElement(ye.a,null,c("Package details")),0!==p?s.a.createElement("a",{href:"#",onClick:function(){return e.addPackage(t)}},c("Add package")):null),0===p?s.a.createElement("div",{className:"packages-step__no-packages"},s.a.createElement(Y.a,{icon:"product",size:18}),s.a.createElement("a",{href:"#",onClick:function(){return e.addPackage(t)}},c("Select a package type"))):s.a.createElement("div",{className:"packages-step__with-packages"},s.a.createElement(Ne.a,{onChange:function(r){e.setPackageType(a,t,n,r.target.value)},value:r.box_id,isError:l.box_id||l.dimensions},s.a.createElement("option",{value:"not_selected",key:"not_selected"},c("Please select a package"))," ",Object(v.map)(o,function(e,t){return Object(v.isEmpty)(e.definitions)?null:s.a.createElement("optgroup",{label:e.title,key:t},Object(v.map)(e.definitions,d))}))),s.a.createElement(we.a,f()({persistOnSave:!0},e,{onSaveSuccess:function(r){e.setPackageType(a,t,n,r)}})))};Se.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,packageId:c.a.string.isRequired,pckgErrors:c.a.object.isRequired,pckg:c.a.object.isRequired};var Re=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n),s=r?i.storeOptions:{},o=Object(be.e)(e,n)||{};return{dimensionUnit:s.dimension_unit,packageGroups:Object(be.d)(e,a,n),form:o}},function(e){return Object(u.b)({setPackageType:U.R,addPackage:je.addPackage},e)})(Object(d.localize)(Se)),qe=a(42),Pe=function(e){var t=e.siteId,a=e.orderId,n=e.packageId,r=e.selected,i=e.weightUnit,o=e.errors,c=e.translate,l=e.userMeta,u=e.children,d=o[n]||{};if(!n)return null;var m=r[n],p="individual"===m.box_id,g=function(e,r){return s.a.createElement(Ce,{siteId:t,orderId:a,key:r,item:e,itemIndex:r,packageId:n,showRemove:!0,isIndividualPackage:p})},h=function(){return e.openAddItem(a,t)},b=function(){return p?null:s.a.createElement(ge.a,{className:w()("button","is-compact","packages-step__add-item-btn"),onClick:h},c("Add items"))},f=isNaN(m.weight)?"":m.weight;return s.a.createElement("div",{className:"packages-step__package"},s.a.createElement("div",null,s.a.createElement("div",{className:"packages-step__package-items-header-name"},s.a.createElement(ye.a,null,c("Items to fulfill"))),s.a.createElement("div",{className:"packages-step__package-items-header-weight"},s.a.createElement(ye.a,null,c("Weight"))),s.a.createElement("div",{className:"packages-step__package-items-header-qty"},s.a.createElement(ye.a,null,c("QTY"))),s.a.createElement("div",{className:"packages-step__package-items-header-move"}),function(){var e=Object(v.some)(r,function(e,t){return n!==t&&e.items.length});if(!m.items.length)return s.a.createElement("div",{className:"packages-step__add-item-row"},s.a.createElement("div",{className:"packages-step__no-items-message"},c("There are no items in this package."),e?b():null));var t=m.items.map(g);return e&&t.push(s.a.createElement("div",{key:t.length,className:"packages-step__add-item-row"},b())),t}()),s.a.createElement(Re,{siteId:t,orderId:a,isIndividualPackage:p,pckgErrors:d,pckg:m,packageId:n,lastBoxId:l.last_box_id}),s.a.createElement("div",{className:"packages-step__package-weight"},s.a.createElement(j.a,{htmlFor:"weight_".concat(n)},c("Total Weight (with package)")),s.a.createElement(_e.a,{id:"weight_".concat(n),placeholder:c("0"),value:f,onChange:function(r){e.updatePackageWeight(a,t,n,r)},className:Boolean(d.weight)?"is-error":"",type:"number",suffix:i}),d.weight&&s.a.createElement(Ee.a,{text:d.weight})),u)};Pe.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,packageId:c.a.string.isRequired,selected:c.a.object.isRequired,updatePackageWeight:c.a.func.isRequired,dimensionUnit:c.a.string.isRequired,weightUnit:c.a.string.isRequired,errors:c.a.object.isRequired,openAddItem:c.a.func.isRequired,userMeta:c.a.object.isRequired};var Te=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n),s=r?i.storeOptions:{},o=r&&Object(H.f)(e,a,n).packages,c=r?Object(qe.j)(e,n):{};return{siteId:n,errors:o,packageId:i.openedPackageId,selected:i.form.packages.selected,dimensionUnit:s.dimension_unit,weightUnit:s.weight_unit,userMeta:c}},function(e){return Object(u.b)(h()({updatePackageWeight:U.Y,openAddItem:U.t},je),e)})(Object(d.localize)(Pe)),ze=a(683),De=a(679),Ae=function(e){e.site;var t=e.siteId,a=e.orderId,n=e.showItemMoveDialog,r=e.movedItemIndex,i=e.targetPackageId,o=e.openedPackageId,c=e.selected,l=e.all,u=e.translate;if(-1===r||!n)return null;var d,m,p=function(n,r){return s.a.createElement(j.a,{key:n,className:"packages-step__dialog-package-option"},s.a.createElement(x.a,{checked:n===i,onChange:function(){return e.setTargetPackage(a,t,n)}}),r)},g=c[o],h=g.items[r],b=(d=h.product_id,"post.php?post=".concat(d,"&action=edit")),f=s.a.createElement("a",{href:b,target:"_blank",rel:"noopener noreferrer"},h.name),v=he(c,l,!0);m=""===o?u("{{itemLink/}} is currently saved for a later shipment.",{components:{itemLink:f}}):"individual"===g.box_id?u("{{itemLink/}} is currently shipped in its original packaging.",{components:{itemLink:f}}):u("{{itemLink/}} is currently in {{pckg/}}.",{components:{itemLink:f,pckg:s.a.createElement("span",{className:"packages-step__dialog-package-name"},v[o])}});var E=function(){return e.closeItemMove(a,t)},y=[{action:"cancel",label:u("Cancel"),onClick:E},{action:"move",label:u("Submit"),isPrimary:!0,disabled:i===o,onClick:function(){return e.moveItem(a,t,o,r,i)}}];return s.a.createElement(ze.a,{isVisible:n,isFullScreen:!1,onClickOutside:E,onClose:E,buttons:y,additionalClassNames:"wcc-root woocommerce packages-step__dialog"},s.a.createElement(De.a,null,u("Move item")),s.a.createElement("div",{className:"packages-step__dialog-body"},s.a.createElement("p",null,m),s.a.createElement("p",null,u("Where would you like to move it?")),function(){var e=[];return Object.keys(c).forEach(function(t){var a=c[t];t!==o&&"individual"!==a.box_id&&e.push(p(t,v[t]))}),e}(),p("new",u("Add to a New Package")),g&&"individual"===g.box_id?null:p("individual",u("Ship in original packaging"))))};Ae.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,showItemMoveDialog:c.a.bool.isRequired,movedItemIndex:c.a.number.isRequired,targetPackageId:c.a.string,openedPackageId:c.a.string.isRequired,selected:c.a.object.isRequired,all:c.a.object.isRequired,moveItem:c.a.func.isRequired};var Me=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.k)(e,a,n);return{site:Object(ke.a)(e,n),showItemMoveDialog:r.showItemMoveDialog||!1,movedItemIndex:isNaN(r.movedItemIndex)?-1:r.movedItemIndex,targetPackageId:r.targetPackageId,openedPackageId:r.openedPackageId,selected:r.form.packages.selected,all:Object(be.a)(e,n)}},function(e){return Object(u.b)({closeItemMove:U.d,setTargetPackage:U.U,moveItem:U.s},e)})(Object(d.localize)(Ae)),Ve=a(852),Le=function(e){var t=e.siteId,a=e.orderId,n=e.showAddItemDialog,r=e.addedItems,i=e.openedPackageId,o=e.selected,c=e.all,l=e.translate;if(!n)return null;var u=he(o,c,!0),d=function(e){return s.a.createElement("span",{className:"packages-step__dialog-package-name"},u[e])},m=[];Object.keys(o).forEach(function(n){if(n!==i){var c=0;o[n].items.forEach(function(i){m.push(function(n,i,o){var c=u[n]?l("%(item)s from {{pckg/}}",{args:{item:o.name},components:{pckg:d(n)}}):o;return s.a.createElement(j.a,{key:"".concat(n,"-").concat(i),className:"packages-step__dialog-package-option"},s.a.createElement(Ve.a,{label:c,className:"form-label packages-step__dialog-package-option",checked:Object(v.includes)(r[n],i),onChange:function(r){e.setAddedItem(a,t,n,i,r)}}))}(n,c,i)),c++})}});var p=function(){return e.closeAddItem(a,t)},g=[{action:"close",label:l("Close"),onClick:p},{action:"add",label:l("Add"),isPrimary:!0,disabled:!Object(v.some)(r,v.size),onClick:function(){return e.addItems(a,t,i)}}];return s.a.createElement(ze.a,{isVisible:n,isFullScreen:!1,onClickOutside:p,onClose:p,buttons:g,additionalClassNames:"wcc-root woocommerce packages-step__dialog"},s.a.createElement(De.a,null,l("Add item")),s.a.createElement("div",{className:"packages-step__dialog-body"},s.a.createElement("p",null,l("Which items would you like to add to {{pckg/}}?",{components:{pckg:d(i)}})),m))};Le.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,showAddItemDialog:c.a.bool.isRequired,addedItems:c.a.object,openedPackageId:c.a.string.isRequired,selected:c.a.object.isRequired,all:c.a.object.isRequired,closeAddItem:c.a.func.isRequired,setAddedItem:c.a.func.isRequired,addItems:c.a.func.isRequired};var Ue=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.k)(e,a,n);return{showAddItemDialog:Boolean(r.showAddItemDialog),addedItems:r.addedItems,openedPackageId:r.openedPackageId,selected:r.form.packages.selected,all:Object(be.a)(e,n)}},function(e){return Object(u.b)({closeAddItem:U.b,setAddedItem:U.E,addItems:U.a},e)})(Object(d.localize)(Le)),He=function(e){var t=e.disabled,a=e.onClick,n=e.children;return s.a.createElement("div",{className:"step-confirmation-button"},s.a.createElement(O.a,{type:"button",onClick:a,disabled:Boolean(t),isPrimary:!0},n))};He.propTypes={disabled:c.a.bool,onClick:c.a.func.isRequired};var We=He,Fe=a(842),Be={AIR_ELIGIBLE_ETHANOL:"Air Eligible Ethanol Package - (authorized fragrance and hand sanitizer shipments)",CLASS_1:"Class 1 \u2013 Toy Propellant/Safety Fuse Package",CLASS_3:"Class 3 - Package (Hand sanitizer, rubbing alcohol, ethanol base products, flammable liquids etc.)",CLASS_4:"Class 4 - Package (Flammable solids)",CLASS_5:"Class 5 - Package (Oxidizers)",CLASS_6:"Class 6 - Package (Poisonous materials)",CLASS_7:"Class 7 \u2013 Radioactive Materials Package (e.g., smoke detectors, minerals, gun sights, etc.)",CLASS_8_CORROSIVE:"Class 8 \u2013 Corrosive Materials Package - Air Eligible Corrosive Materials (certain cleaning or tree/weed killing compounds, etc.)",CLASS_8_WET_BATTERY:"Class 8 \u2013 Nonspillable Wet Battery Package - Sealed lead acid batteries",CLASS_9_NEW_LITHIUM_INDIVIDUAL:"Class 9 - Lithium Battery Marked \u2013 Ground Only Package - New Individual or spare lithium batteries (marked UN3480 or UN3090)",CLASS_9_USED_LITHIUM:"Class 9 - Lithium Battery \u2013 Returns Package - Used electronic devices containing or packaged with lithium batteries (markings required)",CLASS_9_NEW_LITHIUM_DEVICE:"Class 9 - Lithium batteries, marked package - New electronic devices packaged with lithium batteries (marked UN3481 or UN3091)",CLASS_9_DRY_ICE:"Class 9 \u2013 Dry Ice Package (limited to 5 lbs. if shipped via Air)",CLASS_9_UNMARKED_LITHIUM:"Class 9 \u2013 Lithium batteries, unmarked package - New electronic devices installed or packaged with lithium batteries (no marking)",CLASS_9_MAGNETIZED:"Class 9 \u2013 Magnetized Materials Package",DIVISION_4_1:"Division 4.1 \u2013 Mailable flammable solids and Safety Matches Package - Safety/strike on box matches, book matches, mailable flammable solids",DIVISION_5_1:"Division 5.1 \u2013 Oxidizers Package - Hydrogen peroxide (8 to 20% concentration)",DIVISION_5_2:"Division 5.2 \u2013 Organic Peroxides Package",DIVISION_6_1:"Division 6.1 \u2013 Toxic Materials Package (with an LD50 of 50 mg/kg or less) - (pesticides, herbicides, etc.)",DIVISION_6_2:"Division 6.2 - Hazardous Materials - Biological Materials (e.g., lab test kits, authorized COVID test kit returns)",EXCEPTED_QUANTITY_PROVISION:"Excepted Quantity Provision Package (e.g., small volumes of flammable liquids, corrosive, toxic or environmentally hazardous materials - marking required)",GROUND_ONLY:"Ground Only Hazardous Materials (For items that are not listed, but are restricted to surface only)",ID8000:"ID8000 Consumer Commodity Package - Air Eligible ID8000 Consumer Commodity (Non-flammableaerosols, Flammable combustible liquids, Toxic Substance, Miscellaneious hazardous materials)",LIGHTERS:"Lighters Package - Authorized Lighters",LIMITED_QUANTITY:"LTD QTY Ground Package - Aerosols, spray disinfectants, spray paint, hair spray, propane, butane, cleaning products, etc. - Fragrances, nail polish, nail polish remover, solvents, hand sanitizer, rubbing alcohol, ethanol base products, etc. - Other limited quantity surface materials (cosmetics, cleaning products, paints, etc.)",SMALL_QUANTITY_PROVISION:"Small Quantity Provision Package (markings required)"},Ze=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId;return{hazmatType:Object(H.j)(e,{orderId:a,siteId:n}),isSelectingHazmat:Object(H.l)(e,a).isSelectingHazmat}},function(e){return Object(u.b)({setHazmatType:U.O,setIsSelectingHazmat:U.Q},e)})(Object(d.localize)(function(e){var t=e.translate,a=e.orderId,n=e.setHazmatType,i=e.hazmatType,o=e.setIsSelectingHazmat,c=e.isSelectingHazmat;return s.a.createElement(s.a.Fragment,null,s.a.createElement("hr",null),s.a.createElement("div",{className:"label-purchase-modal__hazmat-section"},s.a.createElement("div",{className:"label-purchase-modal__hazmat-section-content"},s.a.createElement(Fe.a,{className:"label-purchase-modal__option-mark-shipment-has-hazmat rates-step__shipping-rate-radio-control",label:t("Are you shipping dangerous goods or hazardous materials?"),selected:c?"yes":"no",options:[{label:"No",value:"no"},{label:"Yes",value:"yes"}],onChange:function(e){o("yes"===e,a)}}),c&&s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"description"},t("Potentially hazardous material includes items such as batteries, dry ice, flammable liquids, aerosols, ammunition, fireworks, nail polish, perfume, paint, solvents, and more. Hazardous items must ship in separate packages.")),s.a.createElement("p",{className:"description"},t("Learn how to securely package, label, and ship HAZMAT through USPS{{registeredMark/}} at {{uspsHazmatTutorial/}}. Determine your product's mailability using the {{hazmatSearchTool/}}.",{components:{hazmatSearchTool:s.a.createElement(D.a,{href:"https://pe.usps.com/HAZMAT/Index"},t("USPS HAZMAT Search Tool")),registeredMark:s.a.createElement("span",{className:"registered-mark"},"\xae"),uspsHazmatTutorial:s.a.createElement(D.a,{href:"https://www.uspsdelivers.com/hazmat-shipping-safety"},"www.usps.com/hazmat")}})),s.a.createElement("p",{className:"description"},t("WooCommerce Shipping does not currently support HAZMAT shipments through {{dhlExpress/}}.",{components:{dhlExpress:s.a.createElement(D.a,{href:"https://www.dhl.com/global-en/home/our-divisions/freight/customer-service/dangerous-goods-and-prohibited-items.html"},t("DHL Express"))}})),s.a.createElement("legend",{className:"form-legend"},t("Select a category")),s.a.createElement(Ne.a,{onChange:function(e){n(e.target.value,a)},value:i},s.a.createElement("option",{value:"none",key:"not_selected"},t("Select a hazardous or dangerous material category")),Object.entries(Be).map(function(e){var t=r()(e,2),a=t[0],n=t[1];return s.a.createElement("option",{style:{maxWidth:"300px",width:"300px"},value:a,key:a},Object(v.truncate)(n,{length:120,omission:" ..."}))}))))))})),Ye={g:0,oz:1,lbs:3,kg:3},Ge=function(e){var t=e.siteId,a=e.orderId,n=e.selected,r=e.weightUnit,i=e.errors,o=e.expanded,c=e.translate,l=Object.keys(n),u=l.reduce(function(e,t){return e+n[t].items.length},0),m=l.reduce(function(e,t){return e+n[t].weight},0),p=0<l.length,g=Object.values(n).some(function(e){return e.isSelectingHazmat&&(!e.hazmatType||"none"===e.hazmatType)});return s.a.createElement(oe,f()({title:c("Packaging")},function(){if(!p)return{isError:!0,summary:c("No packages selected")};var e=Object(v.find)(i,function(e){return!Object(v.isEmpty)(e)});if(e)return{isError:!0,summary:e[Object.keys(e)[0]]};var t=Object(d.numberFormat)(m,{decimals:Ye[r]});return{isSuccess:!0,summary:1===l.length&&1===u?c("1 item in 1 package: %(weight)s %(unit)s total",{args:{weight:t,unit:r}}):1===l.length?c("%(itemsCount)d items in 1 package: %(weight)s %(unit)s total",{args:{itemsCount:u,weight:t,unit:r}}):c("%(itemsCount)d items in %(packageCount)d packages: %(weight)s %(unit)s total",{args:{itemsCount:u,packageCount:l.length,weight:t,unit:r}})}}(),{expanded:o,toggleStep:function(){return e.toggleStep(a,t,"packages")}}),s.a.createElement("div",{className:"packages-step__contents"},s.a.createElement(ve,{siteId:e.siteId,orderId:e.orderId}),s.a.createElement(Te,{siteId:e.siteId,orderId:e.orderId},s.a.createElement(Ze,{siteId:t,orderId:a}))),s.a.createElement(We,{disabled:Object(N.a)(i)||!l.length||g,onClick:function(){return e.confirmPackages(a,t)}},c("Use these packages")),s.a.createElement(Me,{siteId:e.siteId,orderId:e.orderId}),s.a.createElement(Ue,{siteId:e.siteId,orderId:e.orderId}))};Ge.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,selected:c.a.object.isRequired,weightUnit:c.a.string.isRequired,errors:c.a.object.isRequired,expanded:c.a.bool};var Ke=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n),s=r?i.storeOptions:{};return{errors:r&&Object(H.f)(e,a,n).packages,weightUnit:s.weight_unit,expanded:i.form.packages.expanded,selected:i.form.packages.selected}},function(e){return Object(u.b)({toggleStep:U.W,confirmPackages:U.i},e)})(Object(d.localize)(Ge)),Qe=a(674),Je=function(e){var t=e.id,a=e.title,n=e.value,r=e.placeholder,i=e.updateValue,o=e.error,c=e.className,l=e.weightUnit,u=w()({"is-error":Boolean(o)});return s.a.createElement(Qe.a,{className:c},s.a.createElement(j.a,{htmlFor:t},a),s.a.createElement(_e.a,{suffix:l,id:t,name:t,type:"number",placeholder:r||"0.0",value:n,onChange:i,className:u}),o&&"string"===typeof o&&s.a.createElement(Ee.a,{text:o}))};Je.propTypes={weightUnit:c.a.string.isRequired,id:c.a.string.isRequired,title:c.a.node,value:c.a.oneOfType([c.a.string,c.a.number]).isRequired,placeholder:c.a.string,updateValue:c.a.func,error:c.a.oneOfType([c.a.string,c.a.bool]),className:c.a.string};var $e=Je,Xe=function(e){var t=e.id,a=e.title,n=e.value,r=e.placeholder,i=e.updateValue,o=e.error,c=e.className,l=w()({"is-error":Boolean(o)});return s.a.createElement(Qe.a,{className:c},s.a.createElement(j.a,{htmlFor:t},a),o&&"string"===typeof o&&s.a.createElement(Ee.a,{text:o}),s.a.createElement(_e.a,{prefix:"$",id:t,name:t,type:"number",placeholder:r||"0.00",value:n,onChange:i,className:l}),o&&"string"===typeof o&&s.a.createElement(Ee.a,{text:o}))};Xe.propTypes={id:c.a.string.isRequired,title:c.a.node,value:c.a.oneOfType([c.a.string,c.a.number]).isRequired,placeholder:c.a.string,updateValue:c.a.func,error:c.a.oneOfType([c.a.string,c.a.bool]),className:c.a.string};var et=Xe,tt=a(429),at=Object(d.localize)(function(e){var t=e.togglePopoverVisible,a=e.translate;return s.a.createElement(tt.a,{onFocusOutside:t},s.a.createElement("p",null,a("When shipping to countries that follow European Union (EU) customs rules, you must provide a clear, specific description on every item.")),s.a.createElement("p",null,a("For example, if you are sending clothing, you must indicate what type of clothing (e.g. men's shirts, girl's vest, boy's jacket) for the description to be acceptable.")),s.a.createElement("p",null,a("Otherwise, shipments may be delayed or interrupted at customs.")),s.a.createElement("p",null,s.a.createElement(D.a,{href:"https://www.usps.com/international/new-eu-customs-rules.htm"},a("Learn more about customs rules"))))}),nt=Object(d.localize)(function(e){var t=e.translate,a=Object(i.useState)(!1),n=r()(a,2),o=n[0],c=n[1],l=function(){c(function(e){return!e})};return s.a.createElement("span",null,t("Description"),s.a.createElement(ge.a,{onClick:l},s.a.createElement("span",null,s.a.createElement(Y.a,{icon:"info-outline",size:18}))),s.a.createElement("span",{className:"popover-container"},o&&s.a.createElement(at,{togglePopoverVisible:l})))}),rt=Object(d.localize)(function(e){var t=e.translate;return s.a.createElement("span",null,t("HS Tariff number")," (",s.a.createElement(D.a,{href:"https://docs.woocommerce.com/document/woocommerce-shipping-and-tax/woocommerce-shipping/#section-29"},t("more info")),")")}),it=Object(d.localize)(function(e){var t=e.translate,a=Object(i.useState)(!1),n=r()(a,2),o=n[0],c=n[1],l=function(){c(function(e){return!e})};return s.a.createElement("span",null,t("Origin country"),s.a.createElement(ge.a,{onClick:l},s.a.createElement("span",null,s.a.createElement(Y.a,{icon:"info-outline",size:18}))),s.a.createElement("span",{className:"popover-container"},o&&s.a.createElement(tt.a,{onFocusOutside:l},s.a.createElement("p",null,t("Country where the product was manufactured or assembled.")))))}),st=function(e){var t=e.translate,a=e.weightUnit;return s.a.createElement("div",{className:"customs-step__item-rows-header"},s.a.createElement("div",{className:"customs-step__item-description-column"},s.a.createElement(nt,null)),s.a.createElement("span",{className:"customs-step__item-code-column"},s.a.createElement(rt,null)),s.a.createElement("span",{className:"customs-step__item-weight-column"},t("Weight (%s per unit)",{args:[a]})),s.a.createElement("span",{className:"customs-step__item-value-column"},t("Value ($ per unit)")),s.a.createElement("span",{className:"customs-step__item-country-column"},s.a.createElement(it,null)))};st.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,weightUnit:c.a.string.isRequired};var ot=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId;return{weightUnit:Object(H.k)(e,a,n).storeOptions.weight_unit}})(Object(d.localize)(st)),ct=function(e){var t=e.errors,a=e.packageId,n=e.productId,r=e.translate,i=e.description,o=e.defaultDescription,c=e.weight,l=e.value,u=e.tariffNumber,d=e.originCountry,m=e.TariffNumberPlaceholder,p=e.countryNames,g=e.weightUnit;return s.a.createElement("div",{className:"customs-step__item-row"},s.a.createElement(_.a,{id:a+"_"+n+"_description",className:"customs-step__item-description-column",title:s.a.createElement(nt,null),value:i,placeholder:o,updateValue:e.setCustomsItemDescription,error:t.description}),s.a.createElement(_.a,{id:a+"_"+n+"_tariffNumber",className:"customs-step__item-code-column",title:s.a.createElement(rt,null),placeholder:m,value:u,updateValue:e.setCustomsItemTariffNumber,error:t.tariffNumber}),s.a.createElement($e,{weightUnit:g,id:a+"_"+n+"_weight",className:"customs-step__item-weight-column",title:r("Weight (per unit)"),value:c,updateValue:e.setCustomsItemWeight,error:t.weight}),s.a.createElement(et,{id:a+"_"+n+"_value",className:"customs-step__item-value-column",title:r("Value (per unit)"),value:l,updateValue:e.setCustomsItemValue,error:t.value}),s.a.createElement(C.a,{id:a+"_"+n+"_originCountry",className:"customs-step__item-country-column",title:s.a.createElement(it,null),value:d,updateValue:e.setCustomsItemOriginCountry,valuesMap:p}))};ct.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,packageId:c.a.string.isRequired,productId:c.a.number.isRequired,description:c.a.string.isRequired,defaultDescription:c.a.string.isRequired,tariffNumber:c.a.string.isRequired,weight:c.a.oneOfType([c.a.string,c.a.number]).isRequired,value:c.a.oneOfType([c.a.string,c.a.number]).isRequired,originCountry:c.a.string.isRequired,TariffNumberPlaceholder:c.a.string.isRequired,errors:c.a.object,countryNames:c.a.object.isRequired,setCustomsItemDescription:c.a.func.isRequired,setCustomsItemTariffNumber:c.a.func.isRequired,setCustomsItemWeight:c.a.func.isRequired,setCustomsItemValue:c.a.func.isRequired,setCustomsItemOriginCountry:c.a.func.isRequired};var lt=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=t.productId,i=Object(H.x)(e,a,n),s=Object(H.k)(e,a,n),o=s.form.destination.values.country,c=Object(H.n)(e,o,n),l=s.form.customs.items[r];return{description:l.description,defaultDescription:l.defaultDescription,tariffNumber:l.tariffNumber||"",weight:l.weight,value:l.value,originCountry:l.originCountry,TariffNumberPlaceholder:c,errors:i?Object(H.f)(e,a,n).customs.items[r]:{},countryNames:Object(W.d)(e,n),weightUnit:s.storeOptions.weight_unit}},function(e,t){var a=t.orderId,n=t.siteId,r=t.productId;return{setCustomsItemDescription:function(t){return e(Object(U.H)(a,n,r,t))},setCustomsItemTariffNumber:function(t){return e(Object(U.J)(a,n,r,t))},setCustomsItemWeight:function(t){return e(Object(U.L)(a,n,r,t))},setCustomsItemValue:function(t){return e(Object(U.K)(a,n,r,t))},setCustomsItemOriginCountry:function(t){return e(Object(U.I)(a,n,r,t))}}})(Object(d.localize)(ct)),ut=a(702),dt=function(e){var t=e.siteId,a=e.orderId,n=e.errors,r=e.packageId,i=e.translate,o=e.contentsType,c=e.contentsExplanation,l=e.restrictionType,u=e.restrictionComments,d=e.abandonOnNonDelivery,m=e.itn,p=e.items;return s.a.createElement("div",{className:"customs-step__package"},s.a.createElement(j.a,{htmlFor:r+"_abandonOnNonDelivery",className:"customs-step__abandon-on-non-delivery"},s.a.createElement(ut.a,{id:r+"_abandonOnNonDelivery",checked:!d,onChange:function(){return e.setAbandonOnNonDelivery(!d)}}),s.a.createElement("span",null,i("Return to sender if package is unable to be delivered"))),s.a.createElement("div",{className:"customs-step__restrictions-row"},s.a.createElement("div",{className:"customs-step__contents-type"},s.a.createElement(C.a,{id:r+"_contentsType",title:i("Contents type"),value:o||"merchandise",updateValue:e.setContentsType,valuesMap:{merchandise:i("Merchandise"),documents:i("Documents"),gift:i("Gift"),sample:i("Sample"),other:i("Other\u2026")}}),"other"===o&&s.a.createElement(_.a,{id:r+"_contentsExplanation",title:i("Details"),value:c||"",updateValue:e.setContentsExplanation,error:n.contentsExplanation})),s.a.createElement("div",{className:"customs-step__restriction-type"},s.a.createElement(C.a,{id:r+"_restrictionType",title:i("Restriction type"),value:l||"none",updateValue:e.setRestrictionType,valuesMap:{none:i("None"),quarantine:i("Quarantine"),sanitary_phytosanitary_inspection:i("Sanitary / Phytosanitary inspection"),other:i("Other\u2026")}}),"other"===l&&s.a.createElement(_.a,{id:r+"_restrictionComments",title:i("Details"),value:u||"",updateValue:e.setRestrictionExplanation,error:n.restrictionComments}))),s.a.createElement(_.a,{id:r+"_itn",title:s.a.createElement("span",null,i("ITN")," (",s.a.createElement(D.a,{href:"https://pe.usps.com/text/imm/immc5_010.htm"},i("more info")),")"),value:m||"",updateValue:e.setITN,error:n.itn}),s.a.createElement("div",{className:"customs-step__item-rows"},s.a.createElement(ot,{siteId:t,orderId:a}),Object(v.uniq)(Object(v.map)(p,"product_id")).map(function(e){return s.a.createElement(lt,{key:e,productId:e,packageId:r,siteId:t,orderId:a})})))};dt.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,packageId:c.a.string.isRequired,errors:c.a.object,contentsType:c.a.oneOf(["merchandise","documents","gift","sample","other"]),contentsExplanation:c.a.string,restrictionType:c.a.oneOf(["none","quarantine","sanitary_phytosanitary_inspection","other"]),restrictionComments:c.a.string,abandonOnNonDelivery:c.a.bool,itn:c.a.string,items:c.a.arrayOf(c.a.shape({product_id:c.a.number.isRequired})).isRequired,setContentsType:c.a.func.isRequired,setContentsExplanation:c.a.func.isRequired,setRestrictionType:c.a.func.isRequired,setRestrictionExplanation:c.a.func.isRequired,setAbandonOnNonDelivery:c.a.func.isRequired,setITN:c.a.func.isRequired};var mt=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=t.packageId,i=Object(H.x)(e,a,n),s=Object(H.k)(e,a,n).form.packages.selected[r];return{contentsType:s.contentsType,contentsExplanation:s.contentsExplanation,restrictionType:s.restrictionType,restrictionComments:s.restrictionComments,abandonOnNonDelivery:s.abandonOnNonDelivery,itn:s.itn,items:s.items,errors:i?Object(H.f)(e,a,n).customs.packages[r]:{}}},function(e,t){var a=t.orderId,n=t.siteId,r=t.packageId;return{setContentsType:function(t){return e(Object(U.G)(a,n,r,t))},setContentsExplanation:function(t){return e(Object(U.F)(a,n,r,t))},setRestrictionType:function(t){return e(Object(U.T)(a,n,r,t))},setRestrictionExplanation:function(t){return e(Object(U.S)(a,n,r,t))},setAbandonOnNonDelivery:function(t){return e(Object(U.D)(a,n,r,t))},setITN:function(t){return e(Object(U.P)(a,n,r,t))}}})(Object(d.localize)(dt)),pt=function(e,t){return Object(N.a)(e)?t(e.items&&Object.values(e.items).every(function(e){return 1===Object.keys(e).length&&e.description})?"Descriptions are incomplete":"Customs information incomplete"):t("Customs information valid")},gt=function(e){var t=e.siteId,a=e.orderId,n=e.errors,r=e.expanded,i=e.translate,o=e.isSubmitted,c=e.packageDescriptions;return s.a.createElement(oe,{title:i("Customs"),summary:o?pt(n,i):"",expanded:r,toggleStep:e.toggleStep,isSuccess:o&&!Object(N.a)(n),isError:o&&Object(N.a)(n)},Object.keys(c).map(function(e,n){return s.a.createElement("div",{className:"customs-step__package-container",key:e},n?s.a.createElement("hr",null):null,s.a.createElement("p",{className:"customs-step__package-name"},c[e]),s.a.createElement(mt,{packageId:e,siteId:t,orderId:a}))}),s.a.createElement(We,{disabled:Object(N.a)(n),onClick:e.confirmCustoms},i("Save customs form")))};gt.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,packageDescriptions:c.a.objectOf(c.a.string).isRequired,expanded:c.a.bool,isSubmitted:c.a.bool.isRequired,errors:c.a.object,toggleStep:c.a.func.isRequired,confirmCustoms:c.a.func.isRequired};var ht=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n),s=i.form.packages.selected;return{packageDescriptions:he(s,Object(be.a)(e,n),!0),expanded:i.form.customs.expanded,isSubmitted:Object(H.t)(e,a,n),errors:r?Object(H.f)(e,a,n).customs:{}}},function(e,t){var a=t.orderId,n=t.siteId;return{toggleStep:function(){return e(Object(U.W)(a,n,"customs"))},confirmCustoms:function(){return e(Object(U.h)(a,n))}}})(Object(d.localize)(gt)),bt=a(669),ft=a(93),vt=a.n(ft),Et=a(430),yt=a(713),_t=function(e){function t(){var e;return K()(this,t),e=X()(this,te()(t).call(this)),y()(vt()(e),"onSignatureChecked",function(t,a,n){var r=e.props,i=r.rateObject,s=i.service_id,o=i.carrier_id,c=r.updateValue,l=t?{id:a,value:n.value,netCost:n.netCost}:null;e.setState({selectedSignature:l}),c(s,o,t?n.value:0)}),e.state={signatureOption:!1},e}return ne()(t,e),J()(t,[{key:"renderServices",value:function(e,t,a){var n=[];if(a.tracking)switch(e){case"usps":n.push(Object(d.translate)("Includes USPS tracking"));break;default:n.push(Object(d.translate)("Includes tracking"))}if(a.insurance){var r=Number(a.insurance);isNaN(r)?n.push(Object(d.translate)("Insurance (%s)",{args:[a.insurance]})):r>0&&n.push(Object(d.translate)("Insurance (up to %s)",{args:[Object(bt.a)(r,"USD")]}))}return t.filter(function(e){return 0===e.netCost}).length>0&&n.push(Object(d.translate)("Signature required")),a.free_pickup&&n.push(Object(d.translate)("Eligible for free pickup")),n.join(", ")}},{key:"renderSignatureOptions",value:function(e){var t=this;return e.map(function(e,a){return s.a.createElement(Ve.a,{key:a,name:"signature_option_".concat(a),label:e.label,checked:!!t.state.selectedSignature&&t.state.selectedSignature.id===a,onChange:function(n){return t.onSignatureChecked(n,a,e)}})})}},{key:"render",value:function(){var e=this.props,t=e.rateObject,a=t.title,n=t.service_id,r=t.carrier_id,i=t.rate,o=t.delivery_days,c=t.delivery_date_guaranteed,l=t.delivery_date,u=t.tracking,m=t.insurance,p=t.free_pickup,g=e.isSelected,h=e.updateValue,b=e.currency,f=e.signatureRates,E=this.state.selectedSignature,y=Object(v.values)(Object(v.mapValues)(f,function(e,t){var a=0===e.optionNetCost?Object(d.translate)("free"):Object(d.translate)("+%s",{args:[Object(bt.a)(e.optionNetCost,"USD")]});return{label:Object(d.translate)("%(label)s (%(price)s)",{args:{label:e.label,price:a}}),value:t,netCost:e.optionNetCost}})),_="";c&&l?_=Object(d.moment)(l).format("LL").split(",")[0]:o&&(_=Object(d.translate)("%(delivery_days)s business day","%(delivery_days)s business days",{count:o,args:{delivery_days:o}}));var k=E?i+E.netCost:i,O="undefined"!=typeof b&&"USD"!==b?Object(bt.a)(k,"USD")+" USD":Object(bt.a)(k,"USD");return s.a.createElement("div",{className:"rates-step__shipping-rate-container"},s.a.createElement(Fe.a,{className:"rates-step__shipping-rate-radio-control",selected:g?n:null,options:[{label:"",value:n}],onChange:function(){h(n,r,!!E&&E.value)}}),s.a.createElement("div",{className:"rates-step__shipping-rate-information"},s.a.createElement(yt.a,{carrier:r,size:30}),s.a.createElement("div",{className:"rates-step__shipping-rate-description"},s.a.createElement("div",{className:"rates-step__shipping-rate-description-title"},a),s.a.createElement("div",{className:"rates-step__shipping-rate-description-details"},this.renderServices(r,y,{tracking:u,insurance:m,free_pickup:p}),g&&y.length>1?this.renderSignatureOptions(y):null)),s.a.createElement("div",{className:"rates-step__shipping-rate-details"},s.a.createElement("div",{className:"rates-step__shipping-rate-rate"},"ups"===r?s.a.createElement(Et.a,{position:"top left",text:Object(d.translate)("This rate is provided by your connected UPS account")},s.a.createElement("div",{className:"rates-step__shipping-rate-rate-tooltip"},s.a.createElement(Y.a,{icon:"help-outline",size:18}))):null,O),s.a.createElement("div",{className:"rates-step__shipping-rate-delivery-date"},_))))}}]),t}(i.Component);_t.propTypes={rateObject:c.a.shape({rate_id:c.a.string.isRequired,title:c.a.string.isRequired,service_id:c.a.string.isRequired,carrier_id:c.a.string.isRequired,rate:c.a.number.isRequired,delivery_days:c.a.number,delivery_date_guaranteed:c.a.bool,delivery_date:c.a.string,tracking:c.a.bool,insurance:c.a.oneOfType([c.a.string,c.a.number]),free_pickup:c.a.bool}).isRequired,signatureRates:c.a.object.isRequired};var kt=_t,Ot={signature_required:m.a.translate("Signature required"),adult_signature_required:m.a.translate("Adult signature required")},Ct=function(e,t,a){var n=function(e,t,a){var n=Object(v.find)(a[e].default.rates,function(e){return t===e.service_id});return"undefined"!==typeof n?n.rate:0}(e,t,a);return Object(v.pickBy)(Object(v.mapValues)(a[e],function(e,a){var r=function(e,t,a,n){var r=Object(v.find)(a,function(t){return e===t.service_id});return"undefined"===typeof r?null:t in Ot?r.rate===n&&"Express"!==e?null:r:null}(t,a,e.rates,n);return null!==r?{rate:r,label:Ot[a],optionNetCost:r.rate-n}:null}),function(e){return null!==e})},Nt=function(e){var t=e.id,a=e.currency,n=e.selectedRates,r=e.availableRates,i=e.selectedPackages,o=e.allPackages,c=e.updateRate,l=e.errors,u=e.shouldShowRateNotice,d=e.translate,m=he(i,o,!0),p=1===Object.keys(i).length;return s.a.createElement("div",null,u&&function(e){return s.a.createElement(k.a,{className:"rates-step__notice",icon:"info-outline",showDismiss:!1,text:e("The service and rate chosen by the customer at checkout is not available. Please choose another.")})}(d),Object.values(Object(v.mapValues)(i,function(e,i){if(!(i in r))return null;var o=n[i]||"",u=r[i].default.rates,g=(l[i]||[]).filter(function(e,t){return l[i].indexOf(e)===t}),h=function(e,t,a){return c(i,e,t,a)};return s.a.createElement("div",{key:i,className:"rates-step__package-container"},p?null:s.a.createElement("div",{className:"rates-step__package-container-rates-header"},d("Choose rate: %(pckg)s",{args:{pckg:m[i]}})),Object.values(Object(v.mapValues)(u,function(e){var n=e.service_id;return s.a.createElement(kt,{id:t+"_"+i,key:t+"_"+i+"_"+n,currency:a,rateObject:e,signatureRates:Ct(i,n,r),updateValue:h,isSelected:n===o.serviceId})})),g.map(function(e,t){return s.a.createElement(Ee.a,{type:"server-error",key:t,text:e})}))})))};Nt.propTypes={id:c.a.string.isRequired,selectedRates:c.a.object.isRequired,availableRates:c.a.object.isRequired,selectedPackages:c.a.object.isRequired,allPackages:c.a.object.isRequired,updateRate:c.a.func.isRequired,errors:c.a.object.isRequired};var It=Object(d.localize)(Nt);function wt(e){var t=Object(v.get)(e,"shipping_lines",[]);return Object(v.reduce)(t,function(e,t){return e+parseFloat(t.total)},0)}function jt(e){return Object(v.get)(e,"shipping_lines[0].method_title",!1)}function xt(e){return Object(v.get)(e,"currency",!1)}var St=a(130),Rt=function(e){var t=e.siteId,a=e.orderId,n=e.form,r=e.allPackages,i=e.values,o=e.available,c=e.errors,l=e.ratesTotal,u=e.translate,d=e.currency,m=function(e,t,a,n,r){if(!n)return r("Unsaved changes made to packages");if(Object(v.some)(Object(v.mapValues)(t,function(e){return Object(v.isEmpty)(e.default.rates)})))return r("No rates found");if(!a)return"";var i=Object.keys(e);if(1===i.length){var s=i[0],o=e[s],c=t[s].default.rates,l=Object(v.find)(c,["service_id",o]);return l?r("%(serviceName)s: %(rate)s",{args:{serviceName:l.title,rate:Object(bt.a)(l.rate,"USD")}}):""}return r("Total rate: %(total)s",{args:{total:Object(bt.a)(a,"USD")}})}(i,o,l,n.packages.saved,u),p=function(n,r,i,s){return e.updateRate(a,t,n,r,i,s)};return Object(v.forEach)(n.packages.selected,function(e,t){if(""===i[t]&&!Object(v.isEmpty)(o)&&t in o&&1===o[t].default.rates.length){var a=o[t].default.rates[0].service_id;p(t,a,!1)}}),s.a.createElement(oe,f()({title:u("Shipping rates"),summary:m,expanded:!Object(v.isEmpty)(o),toggleStep:function(){return e.toggleStep(a,t,"rates")}},function(e){var t=e.retrievalInProgress,a=e.errors,n=e.available,r=e.form;return t?{isProgress:!0}:Object(N.a)(a)?{isError:!0}:Object(v.isEmpty)(n)?{}:r.packages.saved?{isSuccess:!0}:{isWarning:!0}}(e)),!Object(v.isEmpty)(o)&&function(e){var t=e.shippingMethod,a=e.shippingCost,n=e.translate,r=e.currency,i=document.createElement("div");i.innerHTML=t;var o,c=i.textContent,l="undefined"!=typeof r&&"USD"!==r?r:"";if(t)return o=0<a?n("Customer paid a {{shippingMethod/}} of {{shippingCost/}} for shipping",{components:{shippingMethod:s.a.createElement("span",null,c),shippingCost:s.a.createElement("span",{className:"rates-step__shipping-info-cost"},Object(bt.a)(a,r)," ",l)}}):n("Your customer selected {{shippingMethod/}}",{components:{shippingMethod:s.a.createElement("span",{className:"rates-step__shipping-info-method"},c)}}),s.a.createElement("div",{className:"rates-step__shipping-info"},s.a.createElement(Y.a,{icon:"info-outline"}),s.a.createElement("div",null,o))}(e),s.a.createElement(It,{id:"rates",orderId:a,siteId:t,currency:d,showRateNotice:!1,selectedPackages:n.packages.selected,allPackages:r,selectedRates:i,availableRates:o,updateRate:p,errors:c}))};Rt.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,form:c.a.object.isRequired,values:c.a.object.isRequired,available:c.a.object.isRequired,errors:c.a.object.isRequired,toggleStep:c.a.func.isRequired,updateRate:c.a.func.isRequired};var qt=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n),s=Object(H.o)(e,a,n),o=Object(St.a)(e,a,n);return h()({},i.form.rates,{form:i.form,errors:r&&Object(H.f)(e,a,n).rates,ratesTotal:s?s.total:0,allPackages:Object(be.a)(e,n),shippingCost:wt(o),shippingMethod:jt(o),currency:xt(o)})},function(e){return Object(u.b)({toggleStep:U.W,updateRate:U.ab},e)})(Object(d.localize)(Rt)),Pt=a(849),Tt=a(187),zt=function(e){function t(){var e,a;K()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=X()(this,(e=te()(t)).call.apply(e,[this].concat(r))),y()(vt()(a),"renderDiscount",function(e){var t=a.props.translate,n=t("WooCommerce Shipping gives you access to USPS Commercial Pricing, which is discounted over Retail rates.");return s.a.createElement("div",{className:"label-purchase-modal__price-item-help"},s.a.createElement(Et.a,{className:"label-purchase-modal__price-item-tooltip is-dialog-visible",position:"top center",text:n},s.a.createElement("div",{className:"label-purchase-modal__discount"},t("You save %s with WooCommerce Shipping",{args:[Object(bt.a)(e,"USD")]}),s.a.createElement(Y.a,{icon:"help-outline",size:18}))))}),y()(vt()(a),"renderRow",function(e,t,a,n){var r=w()("label-purchase-modal__price-item",{"label-purchase-modal__price-item-total":n});return s.a.createElement("div",{key:a,className:r},s.a.createElement("div",{className:"label-purchase-modal__price-item-name"},e),s.a.createElement("div",{className:"label-purchase-modal__price-item-amount"},Object(bt.a)(t,"USD")))}),a}return ne()(t,e),J()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.priceBreakdown,n=t.translate;if(!a)return null;var r=a.prices,o=a.discount,c=a.total;return s.a.createElement("div",{className:"label-purchase-modal__shipping-summary-section"},s.a.createElement("hr",null),r.map(function(t,a){var r=n("Package %(index)s \u2013 %(title)s",{args:{index:a+1,title:t.carrierTitle}});return s.a.createElement(i.Fragment,{key:a},e.renderRow(r,t.rateWithDiscount,a),"ups"===t.carrierId?s.a.createElement("div",{className:"label-purchase-modal__price-item-carrier-account-notice"}," ",n("Your UPS account will be charged")):s.a.createElement("div",null),t.addons.map(function(t,n){return s.a.createElement("div",{key:"addons-"+a,className:"label-purchase-modal__price-item-addons"},e.renderRow(t.title,t.rate,"addon-"+n))}))}),this.renderRow(n("Total"),c,"total",!0),0<o&&this.renderDiscount(o))}}]),t}(i.Component);zt.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired};var Dt=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId;return{priceBreakdown:Object(H.o)(e,a,n)}})(Object(d.localize)(zt)),At=function(e){var t=e.translate,a=e.normalizationStatus,n=e.form,r=e.orderId,i=e.siteId,o=n.origin,c=n.rates,l=Object.keys(c.values).length;return s.a.createElement("div",{className:"label-purchase-modal__shipping-summary-section"},s.a.createElement("div",{className:"label-purchase-modal__shipping-summary-info"},a.isSuccess?s.a.createElement("div",{className:"label-purchase-modal__shipping-summary-street"},s.a.createElement("div",null,t("Shipping from")),s.a.createElement("div",null,o.values.address,s.a.createElement("a",{href:"#",onClick:function(){return e.toggleStep(r,i,"origin",!0)}},t("Edit")))):null),s.a.createElement("div",{className:"label-purchase-modal__shipping-summarry-labels"},l+" "+t("shipping label ready","shipping labels ready",{count:l})))};At.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired};var Mt=function(e){var t=e.normalizationInProgress,a=e.errors,n=e.isNormalized,r=e.values,i=e.normalized;return t?{isProgress:!0}:Object(N.a)(a)||n&&!i||!n?{isError:!0}:n?Object(v.isEqual)(r,i)?{isSuccess:!0}:{isWarning:!0}:{}},Vt=Object(d.localize)(Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n),s=i.form.origin,o=r&&Object(H.f)(e,a,n).origin;return{orderId:a,siteId:n,errors:o,form:i.form,expanded:s.expanded,normalizationStatus:Mt(h()({},s,{errors:o}))}},function(e){return Object(u.b)({toggleStep:U.W},e)})(At)),Lt=function(e){var t=e.form,a=e.disabled,n=e.busy;return s.a.createElement(i.Fragment,null,s.a.createElement(ge.a,{disabled:a,onClick:t.needsPrintConfirmation?e.confirmPrintLabel:e.purchaseLabel,isPrimary:!0,isBusy:n,className:w()("button")},function(e){var t=e.form,a=e.translate;return t.needsPrintConfirmation?a("Print"):t.isSubmitting?a("Purchasing\u2026"):a("Buy shipping label","Buy shipping labels",{count:Object.keys(t.packages.selected).length})}(e)))};Lt.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,disabled:c.a.bool,busy:c.a.bool};var Ut=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n);return{form:r&&i.form}},function(e,t){var a=t.orderId,n=t.siteId;return{confirmPrintLabel:function(){return e(Object(U.j)(a,n))},purchaseLabel:function(){return e(Object(U.B)(a,n))}}})(Object(d.localize)(Lt)),Ht=a(263),Wt=function(e){function t(){var e,a;K()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=X()(this,(e=te()(t)).call.apply(e,[this].concat(r))),y()(vt()(a),"onVisibilityChange",function(){document.hidden||a.refetchSettings(),a.creditCardWindow&&a.creditCardWindow.closed&&document.removeEventListener("visibilitychange",a.onVisibilityChange)}),y()(vt()(a),"refetchSettings",function(){a.props.fetchSettings(a.props.siteId)}),y()(vt()(a),"onChooseCard",function(){a.creditCardWindow=window.open(a.props.url),document.addEventListener("visibilitychange",a.onVisibilityChange)}),a}return ne()(t,e),J()(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,a=e.buttonLabel,n=e.buttonDescription;return s.a.createElement(i.Fragment,null,s.a.createElement(ge.a,{onClick:this.onChooseCard,disabled:t,isPrimary:!0,className:w()("button")},a," ",s.a.createElement(Y.a,{icon:"external"})),s.a.createElement("div",{className:"purchase-section__explanation"},n(this.onChooseCard)))}}]),t}(i.Component),Ft=Object(l.b)(function(e){return e},function(e){return Object(u.b)({fetchSettings:Ht.a},e)})(Object(d.localize)(Wt)),Bt=(a(836),Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n),s=r&&Object(H.b)(e,a,n),o=r&&i.form;return{form:o,hasLabelsPaymentMethod:Boolean(Object(qe.o)(e,n)),paymentMethods:Object(qe.m)(e,n),addPaymentMethodURL:Object(qe.e)(e,n),disablePurchase:!o.needsPrintConfirmation&&(!s||o.isSubmitting)}})(Object(d.localize)(function(e){var t=e.orderId,a=e.siteId,n=e.hasLabelsPaymentMethod,r=e.paymentMethods,i=e.addPaymentMethodURL,o=e.form,c=e.disablePurchase,l=e.translate,u=o.isSubmitting&&!o.needsPrintConfirmation,d=Object(H.q)(o.rates),m=d&&Object.values(o.rates.values).some(function(e){return"ups"!==e.carrierId}),p=n&&m||!m;return s.a.createElement("div",{className:"purchase-section"},p||!d?s.a.createElement(Ut,{siteId:a,orderId:t,disabled:c,busy:u}):r.length?s.a.createElement(Ft,{disabled:c,url:"admin.php?page=wc-settings&tab=shipping&section=woocommerce-services-settings",buttonLabel:l("Choose credit card"),buttonDescription:function(e){return l("To print this shipping label, {{a}}choose a credit card to add to your account{{/a}}.",{components:{a:s.a.createElement("a",{onClick:e,href:"#",role:"button"})}})}}):s.a.createElement(Ft,{disabled:c,url:i,buttonLabel:l("Add credit card"),buttonDescription:function(e){return l("To print this shipping label, {{a}}add a credit card to your account{{/a}}.",{components:{a:s.a.createElement("a",{onClick:e,href:"#",role:"button"})}})}}))}))),Zt=a(179),Yt=a(4),Gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(Yt.a)(e);return Object(v.get)(e,["extensions","woocommerce","ui","orders",t,"edits","currentlyEditingId"],null)},Kt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(Yt.a)(e),a=Gt(e,t),n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(Yt.a)(e);return Object(v.get)(e,["extensions","woocommerce","ui","orders",t,"edits","changes"],{})}(e,t);if(Object(v.isObject)(a)){var r=function(){var e=Object(Zt.b)(0,"USD");return{status:"pending",currency:"USD",discount_total:e,discount_tax:e,shipping_total:e,shipping_tax:e,cart_tax:e,total:e,total_tax:e,prices_include_tax:!1,billing:{},shipping:{},payment_method:"calypso_manual",payment_method_title:Object(d.translate)("Manual Payment"),line_items:[],tax_lines:[],shipping_lines:[],fee_lines:[],coupon_lines:[],refunds:[]}}();return h()({},r,n,{id:a})}var i=Object(St.a)(e,a,t);return i?Object(v.merge)({},i,n):n},Qt=a(95),Jt=function(e){var t=e.orderId,a=e.siteId,n=e.form,r=e.errors,i=e.paperSize,o=e.translate,c=e.fulfillOrder,l=e.emailDetails,u=e.order,d=e.hasLabelsPaymentMethod,m=Object(H.q)(n.rates)&&Object.values(n.rates.values).some(function(e){return"ups"!==e.carrierId}),p=d&&m||!m;return s.a.createElement(Pt.a,{className:"label-purchase-modal__sidebar",title:o("Shipping summary")},s.a.createElement("div",{className:"label-purchase-modal__shipping-summary-header"},o("Shipping summary")),s.a.createElement(Vt,{siteId:a,orderId:t}),s.a.createElement(Dt,{siteId:a,orderId:t}),s.a.createElement("hr",null),s.a.createElement("div",{className:"label-purchase-modal__purchase-container"},p?s.a.createElement(C.a,{id:"paper_size",valuesMap:Object(Tt.a)(n.origin.values.country),title:o("Paper size"),value:i,updateValue:function(n){return e.updatePaperSize(t,a,n)},error:r.paperSize}):null,s.a.createElement(Bt,{siteId:a,orderId:t})),s.a.createElement(Ve.a,{className:"label-purchase-modal__option-mark-order-fulfilled",label:Object(Qt.b)(u.status)?o("Notify the customer with shipment details"):o("Mark this order as complete and notify the customer"),checked:c||l,onChange:function(n){e.setFulfillOrderOption(t,a,n&&!Object(Qt.b)(u.status)),e.setEmailDetailsOption(t,a,n&&Object(Qt.b)(u.status))}}))};Jt.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired,paperSize:c.a.string.isRequired,errors:c.a.object.isRequired,form:c.a.object.isRequired,updatePaperSize:c.a.func.isRequired,fulfillOrder:c.a.bool.isRequired,emailDetails:c.a.bool.isRequired,order:c.a.object.isRequired,hasLabelsPaymentMethod:c.a.bool.isRequired,setFulfillOrderOption:c.a.func.isRequired};var $t=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n);return{order:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(Yt.a)(e);return!!Gt(e,t)}(e)?Kt(e):Object(St.a)(e,a),paperSize:i.paperSize,form:i.form,hasLabelsPaymentMethod:Boolean(Object(qe.o)(e,n)),errors:r&&Object(H.f)(e,a,n).sidebar,fulfillOrder:r&&Object(H.z)(e,a,n),emailDetails:r&&Object(H.y)(e,a,n)}},function(e){return Object(u.b)({setEmailDetailsOption:U.M,setFulfillOrderOption:U.N,updatePaperSize:U.Z},e)})(Object(d.localize)(Jt)),Xt=a(837),ea=a(422),ta=function(e){var t=e.loaded,a=e.translate,n=e.showPurchaseDialog,i=s.a.useState(!1),o=r()(i,2),c=o[0],l=o[1],u=s.a.useState(!1),d=r()(u,2),m=d[0],g=d[1];if(!t)return null;s.a.useEffect(function(){n&&g(!0)},[n]),s.a.useEffect(function(){var e=function(){var e=window.wcsMigrationSurvey&&window.wcsMigrationSurvey.shouldShow,t=null!==new URLSearchParams(window.location.search).get("force_survey");e&&(m||t)&&setTimeout(function(){l(!0)},500)};return window.addEventListener("wcs-label-purchase-completed",e),function(){window.removeEventListener("wcs-label-purchase-completed",e)}},[m]),s.a.useEffect(function(){null!==new URLSearchParams(window.location.search).get("force_survey")&&!n&&m&&window.dispatchEvent(new CustomEvent("wcs-label-purchase-completed"))},[n,m]);return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(p.a,{className:"woocommerce label-purchase-modal wcc-root",shouldCloseOnClickOutside:!1,onRequestClose:function(){e.exitPrintingFlow(e.orderId,e.siteId,!1)},title:a("Create shipping label","Create shipping labels",{count:Object.keys(e.form.packages.selected).length})},s.a.createElement("div",{className:"label-purchase-modal__content"},s.a.createElement("div",{className:"label-purchase-modal__main-section"},s.a.createElement(pe,{type:"origin",title:a("Origin address"),siteId:e.siteId,orderId:e.orderId}),s.a.createElement(pe,{type:"destination",title:a("Destination address"),siteId:e.siteId,orderId:e.orderId}),s.a.createElement(Ke,{siteId:e.siteId,orderId:e.orderId}),e.isCustomsFormRequired&&s.a.createElement(ht,{siteId:e.siteId,orderId:e.orderId}),s.a.createElement(qt,{siteId:e.siteId,orderId:e.orderId})),s.a.createElement($t,{siteId:e.siteId,orderId:e.orderId}))),s.a.createElement(ea.a,{siteId:e.siteId,orderId:e.orderId}),c&&s.a.createElement(Xt.a,{isVisible:c,onClose:function(){return l(!1)}}))};ta.propTypes={siteId:c.a.number.isRequired,orderId:c.a.number.isRequired};t.default=Object(l.b)(function(e,t){var a=t.orderId,n=t.siteId,r=Object(H.x)(e,a,n),i=Object(H.k)(e,a,n);return{loaded:r,form:r&&i.form,showPurchaseDialog:i.showPurchaseDialog,isCustomsFormRequired:Object(H.s)(e,a,n)}},function(e){return Object(u.b)({exitPrintingFlow:U.o},e)})(Object(d.localize)(ta))}}]);